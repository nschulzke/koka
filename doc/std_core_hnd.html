
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=1.0" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>std/core/hnd documentation</title>
</head>

<body class="koka doc body madoko">
<h1><a class="link" href="https://koka-lang.github.io/koka/doc/std_core_hnd-source.html"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd</span></a><a class="link" href="toc.html"><span class="toc-link">&#x25b2;toc</span></a></h1>
<div class="toc code"><ul class="toc"><li><a class="link" href="#type_space_clause0"><span class="kw">type</span>&nbsp;<span class="tp">clause0</span></a>
</li><li class="nested"><a class="link" href="#clause_control_raw0"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>control<span class="dash">-</span>raw0</a></li><li class="nested"><a class="link" href="#clause_control0"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>control0</a></li><li class="nested"><a class="link" href="#clause_never0"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>never0</a></li><li class="nested"><a class="link" href="#clause_tail_noop0"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>tail<span class="dash">-</span>noop0</a></li><li class="nested"><a class="link" href="#clause_tail0"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>tail0</a></li><li class="nested"><a class="link" href="#clause_value"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>value</a></li><li><a class="link" href="#type_space_clause1"><span class="kw">type</span>&nbsp;<span class="tp">clause1</span></a>
</li><li class="nested"><a class="link" href="#clause_control_raw1"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>control<span class="dash">-</span>raw1</a></li><li class="nested"><a class="link" href="#clause_control_raw3"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>control<span class="dash">-</span>raw3</a></li><li class="nested"><a class="link" href="#clause_control1"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>control1</a></li><li class="nested"><a class="link" href="#clause_control3"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>control3</a></li><li class="nested"><a class="link" href="#clause_control4"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>control4</a></li><li class="nested"><a class="link" href="#clause_never1"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>never1</a></li><li class="nested"><a class="link" href="#clause_never3"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>never3</a></li><li class="nested"><a class="link" href="#clause_never4"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>never4</a></li><li class="nested"><a class="link" href="#clause_tail_noop1"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>tail<span class="dash">-</span>noop1</a></li><li class="nested"><a class="link" href="#clause_tail_noop3"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>tail<span class="dash">-</span>noop3</a></li><li class="nested"><a class="link" href="#clause_tail_noop4"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>tail<span class="dash">-</span>noop4</a></li><li class="nested"><a class="link" href="#clause_tail1"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>tail1</a></li></ul><ul class="toc"><li class="nested"><a class="link" href="#clause_tail3"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>tail3</a></li><li class="nested"><a class="link" href="#clause_tail4"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>tail4</a></li><li><a class="link" href="#type_space_clause2"><span class="kw">type</span>&nbsp;<span class="tp">clause2</span></a>
</li><li class="nested"><a class="link" href="#clause_control_raw2"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>control<span class="dash">-</span>raw2</a></li><li class="nested"><a class="link" href="#clause_control2"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>control2</a></li><li class="nested"><a class="link" href="#clause_never2"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>never2</a></li><li class="nested"><a class="link" href="#clause_tail_noop2"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>tail<span class="dash">-</span>noop2</a></li><li class="nested"><a class="link" href="#clause_tail2"><span class="kw">fun</span>&nbsp;clause<span class="dash">-</span>tail2</a></li><li><a class="link" href="#type_space_ev"><span class="kw">type</span>&nbsp;<span class="tp">ev</span></a>
</li><li class="nested"><a class="link" href="#ev_fs__eq__eq_"><span class="kw">fun</span>&nbsp;<span class="lq">ev<span class="fslash">/</span></span>(==)</a></li><li><a class="link" href="#type_space_ev_index"><span class="kw">alias</span>&nbsp;<span class="tp">ev<span class="dash">-</span>index</span></a>
</li><li><a class="link" href="#type_space_htag"><span class="kw">type</span>&nbsp;<span class="tp">htag</span></a>
</li><li class="nested"><a class="link" href="#htag_fs_show"><span class="kw">fun</span>&nbsp;<span class="lq">htag<span class="fslash">/</span></span>show</a></li><li><a class="link" href="#type_space_resume_context"><span class="kw">type</span>&nbsp;<span class="tp">resume<span class="dash">-</span>context</span></a>
</li><li class="nested"><a class="link" href="#finalize"><span class="kw">fun</span>&nbsp;finalize</a></li><li class="nested"><a class="link" href="#resume"><span class="kw">fun</span>&nbsp;resume</a></li><li class="nested"><a class="link" href="#resume_shallow"><span class="kw">fun</span>&nbsp;resume<span class="dash">-</span>shallow</a></li><li><a class="link" href="#type_space_yield_info"><span class="kw">type</span>&nbsp;<span class="tp">yield<span class="dash">-</span>info</span></a>
</li><li class="nested"><a class="link" href="#unsafe_reyield"><span class="kw">fun</span>&nbsp;unsafe<span class="dash">-</span>reyield</a></li><li>&nbsp;</li></ul><ul class="toc"><li><a class="link" href="#finally"><span class="kw">fun</span>&nbsp;finally</a></li><li><a class="link" href="#initially"><span class="kw">fun</span>&nbsp;initially</a></li><li><a class="link" href="#local_var"><span class="kw">fun</span>&nbsp;local<span class="dash">-</span>var</a></li><li><a class="link" href="#unsafe_try_finalize"><span class="kw">fun</span>&nbsp;unsafe<span class="dash">-</span>try<span class="dash">-</span>finalize</a></li><li><a class="link" href="#yield_bind"><span class="kw">fun</span>&nbsp;yield<span class="dash">-</span>bind</a></li><li><a class="link" href="#yield_bind2"><span class="kw">fun</span>&nbsp;yield<span class="dash">-</span>bind2</a></li><li><a class="link" href="#yield_extend"><span class="kw">fun</span>&nbsp;yield<span class="dash">-</span>extend</a></li><li><a class="link" href="#yielding"><span class="kw">fun</span>&nbsp;yielding</a></li><li><a class="link" href="#yielding_non_final"><span class="kw">fun</span>&nbsp;yielding<span class="dash">-</span>non<span class="dash">-</span>final</a></li></ul></div>
<div class="doc koka comment">
<h1 class="synopsis">Internal effect handler primitives.</h1>



<p class="p noindent"> Internal primitives to implement evidence based algebraic
 effect handlers. These are emitted by the compiler during evidence
 translation and this module is always implicitly imported.
</p>
<p class="p indent"> This module is compiled <em class="em-low1">without monadic translation</em> and
 thus we need to do this by hand in this module which allows us to implement
 most primitives directly in Koka keeping the external C/JavaScript/etc primitives
 to a minimum.
</p>
<p class="p indent"> The paper:
</p>
<blockquote>

<p class="p noindent">Ningning Xie, and Daan Leijen. <em class="em-low1">Generalized Evidence Passing for Effect Handlers</em>,
or <em class="em-low1">efficient compilation of effect handlers to C</em>.
Proceedings of the ACM International Conference on Functional Programming (ICFP&#39;21),
August 2021, Vol 5: pp. 71, doi: 10.1145/3473576.
<a href="https://www.microsoft.com/en-us/research/publication/generalized-evidence-passing-for-effect-handlers-or-efficient-compilation-of-effect-handlers-to-c/" class="texturl monospace">https://&#8203;www.&#8203;microsoft.&#8203;com/&#8203;en-&#8203;us/&#8203;research/&#8203;publication/&#8203;generalized-&#8203;evidence-&#8203;passing-&#8203;for-&#8203;effect-&#8203;handlers-&#8203;or-&#8203;efficient-&#8203;compilation-&#8203;of-&#8203;effect-&#8203;handlers-&#8203;to-&#8203;c/&#8203;</a>
</p></blockquote>
<p class="p noindent"> describes precisely how the monadic evidence translation works on which this
 module is based. Read this first to understand how this module works.
</p>
<p class="p indent"> Another paper of interest is:
</p>
<blockquote>

<p class="p noindent">Ningning Xie, and Daan Leijen. <em class="em-low1">Effect Handlers in Haskell, Evidently</em>.
The 13th ACM SIGPLAN International Haskell Symposium, (Haskell&#39;20),
August 2020. <a href="https://www.microsoft.com/en-us/research/uploads/prod/2020/07/effev.pdf" class="texturl monospace">https://&#8203;www.&#8203;microsoft.&#8203;com/&#8203;en-&#8203;us/&#8203;research/&#8203;uploads/&#8203;prod/&#8203;2020/&#8203;07/&#8203;effev.&#8203;pdf</a>
</p></blockquote>
<p class="p noindent"> which which explains the internal typing of handlers, evidence vectors, etc. in a simpler setting.
</p><h3 id="sec-notes" class="h2" data-heading-depth="2" style="display:block"><span class="heading-before"><span class="heading-label">0.1</span>.&#8194;</span>Notes</h3>
<p class="p noindent"> An effect <em class="em-low1">row</em> has kind <code class="koka"><span class="tp sp">::</span><span class="co">E</span></code>, while an atomic effect kind is <code class="koka"><span class="tp sp">::</span><span class="co">X</span></code>.
 (We will see that <code class="koka"><span class="tp sp">::</span><span class="co">X</span></code> is equal to the kind <code class="koka"><span class="tp sp">::</span><span class="tp sp">(</span><span class="co">E</span>,<span class="co">V</span>) <span class="kw op">-&gt;</span> <span class="co">V</span></code> ) (<code class="koka"><span class="tp sp">::</span><span class="co">V</span></code> is for value kinds *)
</p>
<p class="p indent"> We use the term &#8220;answer&#8221; context to talk about the result type <code class="koka"><span class="tp tv">r</span></code> and effect type <code class="koka"><span class="tp tv">e</span></code> of
 (the context of) the handler in the stack. The <code class="koka"><span class="tp tv">e</span></code> does not include the effect <code class="koka"><span class="tp sp">::</span><span class="co">X</span></code> of the handler.
</p>
<ul class="ul list-dash loose">
<li class="li ul-li list-dash-li loose-li">
<p><code class="koka"><span class="tp">marker</span><span class="tp sp">&#60;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">r</span><span class="tp sp">&#62;</span></code> : a unique integer corresponding to an answer context <code class="koka"><span class="op">:&#60;</span>e,r<span class="op">&#62;</span></code>. This functions
as a dependent type: when the integer matches at runtime, that will be the type of the answer context.
</p></li>
<li class="li ul-li list-dash-li loose-li">
<p>handlers <code class="koka"><span class="tp tv">h</span></code> are partially applied types with signature <code class="koka">h<span class="op">&#60;</span>e,r<span class="op">&#62;</span> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="co">E</span>,<span class="co">V</span>)<span class="kw op">-&gt;</span><span class="co">V</span></code>
for some answer context <code class="koka"><span class="op">:&#60;</span>e,r<span class="op">&#62;</span></code>. The handlers contain all operations (much like a virtual method table).
(these handler types are generated by the compiler for each effect type)
</p></li>
<li class="li ul-li list-dash-li loose-li">
<p>Evidence <code class="koka">ev<span class="op">&#60;</span>h <span class="tp sp">::</span> <span class="tp sp">(</span><span class="co">E</span>,<span class="co">V</span>)<span class="kw op">-&gt;</span><span class="co">V</span> <span class="op">&#62;</span></code> for a handler <code class="koka"><span class="tp tv">h</span></code> is an existential tuple
<code class="koka"><span class="kw">forall</span> e r<span class="kw op">.</span> <span class="co">Ev</span>( marker<span class="tp kw op">:</span> <span class="tp">marker</span><span class="tp sp">&#60;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">r</span><span class="tp sp">&#62;</span>, hnd<span class="tp kw op">:</span> <span class="tp tv">h</span><span class="tp sp">&#60;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">r</span><span class="tp sp">&#62;</span> )</code> containing the marker and the actual handler (pointer)
for some answer context <code class="koka"><span class="op">:&#60;</span>e,r<span class="op">&#62;</span></code> &#8211; we don&#39;t know the answer context exact type as it depends on where
the handler was dynamically bound; we just have evidence that this handler <code class="koka"><span class="tp tv">h</span></code> exists in our context.
</p></li>
<li class="li ul-li list-dash-li loose-li">
<p>Actually, we use a quadruple for the evidence (corresponding to the evidence as formalized in the generalized evidence paper).
We also add the handler effect tag (<code class="koka"><a class="pp" href="#type_space_htag"><span class="tp">htag</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>htag: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-&gt;</span> <span class="co">V</span>) <span class="kw op">-&gt;</span> <span class="co">V</span></span></a><span class="tp sp">&#60;</span><span class="tp tv">h</span><span class="tp sp">&#62;</span></code>) (for dynamic lookup), and the evidence vector
of the answer context where the handler was defind (<code class="koka"><span class="tp">evv</span><span class="tp sp">&#60;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">r</span><span class="tp sp">&#62;</span></code>)
(so we can execute operations in-place using the evidence vector at the point where they were defined).
</p></li>
<li class="li ul-li list-dash-li loose-li">
<p>Each operation definition in a handler is called a <em class="em-low1">clause</em>. For a one argument operation, we have:
</p><pre class="koka source"><span class="plaincode">abstract value type clause1&lt;a,b,h,e::E,r&gt;
  Clause1( clause: (marker&lt;e,r&gt;, ev&lt;h&gt;, a) -&gt; e b )
</span><span class="nicecode"><span class="kw">abstract</span> value <span class="tp kw">type</span> <a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">::</span><span class="co">E</span>,r<span class="op">&gt;</span>
  <span class="co">Clause1</span>( clause<span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">marker</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">r</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <a class="pp" href="#type_space_ev"><span class="tp">ev</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>ev: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span> )
</span></pre>


<p>defining an operation <code class="koka"><span class="tp tv">a</span> <span class="tp kw op">-&gt;</span> <span class="tp tv">b</span></code> for some handler <code class="koka"><span class="tp tv">h</span></code> in an answer context <code class="koka"><span class="op">:&#60;</span>e,r<span class="op">&#62;</span></code>.
(these are generated by the compiler from a handler definition)
</p></li>
<li class="li ul-li list-dash-li loose-li">
<p>An operation is performed by a rank-2 function:
<code class="koka"><span class="kw">fun</span> perform1( ev <span class="tp kw op">:</span> <a class="pp" href="#type_space_ev"><span class="tp">ev</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>ev: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-&gt;</span> <span class="co">V</span>) <span class="kw op">-&gt;</span> <span class="co">V</span></span></a><span class="tp sp">&#60;</span><span class="tp tv">h</span><span class="tp sp">&#62;</span>, select<span class="dash">-</span>op <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp kw">forall</span><span class="tp sp">&#60;</span><span class="tp tv">e1</span><span class="tp sp">,</span><span class="tp tv">r</span><span class="tp sp">&#62;</span> <span class="tp tv">h</span><span class="tp sp">&#60;</span><span class="tp tv">e1</span><span class="tp sp">,</span><span class="tp tv">r</span><span class="tp sp">&#62;</span> <span class="tp kw op">-&gt;</span> <a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-&gt;</span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-&gt;</span> <span class="co">V</span></span></a><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">e1</span><span class="tp sp">,</span><span class="tp tv">r</span><span class="tp sp">&#62;</span><span class="tp sp">)</span>, x <span class="tp kw op">:</span> <span class="tp tv">a</span> ) <span class="tp kw op">:</span> <span class="tp tv">e</span> <span class="tp tv">b</span></code>
where we can call an operation given evidence for a handler <code class="koka"><a class="pp" href="#type_space_ev"><span class="tp">ev</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>ev: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-&gt;</span> <span class="co">V</span>) <span class="kw op">-&gt;</span> <span class="co">V</span></span></a><span class="tp sp">&#60;</span><span class="tp tv">h</span><span class="tp sp">&#62;</span></code> together with a
polymorphic field selection function that for any handler <code class="koka">h</code> in <em class="em-low1">any</em> answer context, returns its clause.
It is defined as:
</p><pre class="koka source"><span class="plaincode">match ev
    Ev(&#95;tag,m,h,&#95;answ) -&gt; match select-op(h)  // for an abstract &#96;:&lt;e1,r&gt;&#96;
      Clause1(f) -&gt; f(m,ev,x)
</span><span class="nicecode"><span class="kw">match</span> ev
    <span class="co">Ev</span>(&#95;tag,m,h,&#95;answ) <span class="kw op">-></span> <span class="kw">match</span> select<span class="dash">-</span>op(h)  <span class="comment">// for an abstract &#96;:&lt;e1,r&gt;&#96;
</span>         <span class="co">Clause1</span>(f) <span class="kw op">-></span> f(m,ev,x)
</span></pre>


</li>
<li class="li ul-li list-dash-li loose-li">
<p>Each clause <em class="em-low1">definition</em> can now determine to fully yield to the handler, or be tail-resumptive etc.
(that is, this is determined at the handler definition site, not the call site, and generated by the compiler)
For example, we could be most general (<code class="koka"><span class="kw">ctl</span></code>) and yield back to the marker (where the handler was defined in the call-stack)
(with a function that receives the continuation/resumption <code class="koka">k</code>):
</p><pre class="koka source"><span class="plaincode">Clause1( fn(m,ev,x) yield-to(m, fn(k) op(k,x) ))
</span><span class="nicecode"><span class="co">Clause1</span>( <span class="kw">fn</span>(m,ev,x) yield<span class="dash">-</span>to(m, <span class="kw">fn</span>(k) op(k,x) ))
</span></pre>


<p>or be super efficient and directly call the (tail-resumptive) operation in-place (<code class="koka"><span class="kw">fun</span></code>):
</p><pre class="koka source"><span class="plaincode">Clause1( fn(m,ev,x) op(x) )
</span><span class="nicecode"><span class="co">Clause1</span>( <span class="kw">fn</span>(m,ev,x) op(x) )
</span></pre>


<p>and various variants in-between. The last definition is unsafe for example if the (user defined) <code class="koka">op</code> invokes
operations itself as the evidence vector should be the one as defined at the handler site.
So, we norally use instead:
</p><pre class="koka source"><span class="plaincode">Clause1( fn(m,ev,x) under1(ev,op,x) )
</span><span class="nicecode"><span class="co">Clause1</span>( <span class="kw">fn</span>(m,ev,x) under1(ev,op,x) )
</span></pre>


<p>where <code class="koka">under1</code> uses the evidence vector (<code class="koka">hevv</code>) stored in the evidence <code class="koka">ev</code> to execute <code class="koka">op(x)</code> under.
(this is also explained in detail in the generalized evidence paper).
</p></div>
<div class="decl" id="type_space_clause0"><div class="header code"><span class="def"><span class="kw">type</span>&nbsp;<span class="tp"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_hnd-source.html#type_space_clause0"><span class="tp">clause0</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause0: <span class="tp sp">(</span><span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a></span></span><span class="tp">&lt;<span class="tp tv">a</span>,<span class="tp tv">b</span>,<span class="tp tv">e</span>,<span class="tp tv">c</span>&gt;</span></div><div class="nested"><div class="decl" id="clause_control_raw0"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_control_raw0">clause<span class="dash">-</span>control<span class="dash">-</span>raw0</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><a class="pp" href="#type_space_resume_context"><span class="tp">resume<span class="dash">-</span>context</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>resume<span class="dash">-</span>context: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">E</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">e1</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause0"><span class="tp">clause0</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause0: <span class="tp sp">(</span><span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_control0"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_control0">clause<span class="dash">-</span>control0</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause0"><span class="tp">clause0</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause0: <span class="tp sp">(</span><span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_never0"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_never0">clause<span class="dash">-</span>never0</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause0"><span class="tp">clause0</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause0: <span class="tp sp">(</span><span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_tail_noop0"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_tail_noop0">clause<span class="dash">-</span>tail<span class="dash">-</span>noop0</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause0"><span class="tp">clause0</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause0: <span class="tp sp">(</span><span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_tail0"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_tail0">clause<span class="dash">-</span>tail0</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause0"><span class="tp">clause0</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause0: <span class="tp sp">(</span><span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_value"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_value">clause<span class="dash">-</span>value</a></span>( <span class="tp tpp">v</span> <span class="tp sp">:</span>&nbsp;<span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause0"><span class="tp">clause0</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause0: <span class="tp sp">(</span><span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span></div></div></div></div>
<div class="decl" id="type_space_clause1"><div class="header code"><span class="def"><span class="kw">type</span>&nbsp;<span class="tp"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_hnd-source.html#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a></span></span><span class="tp">&lt;<span class="tp tv">a</span>,<span class="tp tv">b</span>,<span class="tp tv">c</span>,<span class="tp tv">e</span>,<span class="tp tv">d</span>&gt;</span></div><div class="nested"><div class="decl" id="clause_control_raw1"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_control_raw1">clause<span class="dash">-</span>control<span class="dash">-</span>raw1</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <a class="pp" href="#type_space_resume_context"><span class="tp">resume<span class="dash">-</span>context</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>resume<span class="dash">-</span>context: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">E</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">e1</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">d</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_control_raw3"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_control_raw3">clause<span class="dash">-</span>control<span class="dash">-</span>raw3</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">x1</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">x2</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">x3</span> <span class="tp kw op">:</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <a class="pp" href="#type_space_resume_context"><span class="tp">resume<span class="dash">-</span>context</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>resume<span class="dash">-</span>context: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">E</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">e1</span><span class="tp sp">,</span><span class="tp tv">b1</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">)</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">b1</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_control1"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_control1">clause<span class="dash">-</span>control1</a></span>( <span class="tp tpp">clause</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">k</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">d</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">d</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p>Generic control clause.
</p></div></div><div class="decl" id="clause_control3"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_control3">clause<span class="dash">-</span>control3</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">x1</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">x2</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">x3</span> <span class="tp kw op">:</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tpp">k</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">d</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b1</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">)</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">b1</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_control4"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_control4">clause<span class="dash">-</span>control4</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">x1</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">x2</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">x3</span> <span class="tp kw op">:</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tpp">x4</span> <span class="tp kw op">:</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tpp">k</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a1</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c1</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">,</span><span class="tp tv">b1</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">c1</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_never1"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_never1">clause<span class="dash">-</span>never1</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">d</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p>Clause that never resumes (e.g. an exception handler)
(these do not need to capture a resumption and execute finally clauses upfront).
</p></div></div><div class="decl" id="clause_never3"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_never3">clause<span class="dash">-</span>never3</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">)</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">b1</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_never4"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_never4">clause<span class="dash">-</span>never4</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">,</span><span class="tp tv">b1</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">c1</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_tail_noop1"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_tail_noop1">clause<span class="dash">-</span>tail<span class="dash">-</span>noop1</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">d</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p>Tail-resumptive clause that does not itself invoke operations
(these can be executed &#8216;in-place&#8217; without setting the correct evidence vector).
</p></div></div><div class="decl" id="clause_tail_noop3"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_tail_noop3">clause<span class="dash">-</span>tail<span class="dash">-</span>noop3</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">)</span><span class="tp sp">,</span><span class="tp tv">b1</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_tail_noop4"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_tail_noop4">clause<span class="dash">-</span>tail<span class="dash">-</span>noop4</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">,</span> <span class="tp tv">b1</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">,</span> <span class="tp tv">b1</span><span class="tp sp">)</span><span class="tp sp">,</span><span class="tp tv">c1</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_tail1"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_tail1">clause<span class="dash">-</span>tail1</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">d</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p>Tail-resumptive clause: resumes exactly once at the end
(these can be executed &#8216;in-place&#8217; without capturing a resumption).
</p></div></div><div class="decl" id="clause_tail3"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_tail3">clause<span class="dash">-</span>tail3</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">)</span><span class="tp sp">,</span><span class="tp tv">b1</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_tail4"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_tail4">clause<span class="dash">-</span>tail4</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">,</span> <span class="tp tv">b1</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause1"><span class="tp">clause1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause1: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">,</span> <span class="tp tv">b1</span><span class="tp sp">)</span><span class="tp sp">,</span><span class="tp tv">c1</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div></div></div></div>
<div class="decl" id="type_space_clause2"><div class="header code"><span class="def"><span class="kw">type</span>&nbsp;<span class="tp"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_hnd-source.html#type_space_clause2"><span class="tp">clause2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause2: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a></span></span><span class="tp">&lt;<span class="tp tv">a</span>,<span class="tp tv">b</span>,<span class="tp tv">c</span>,<span class="tp tv">d</span>,<span class="tp tv">e</span>,<span class="tp tv">a1</span>&gt;</span></div><div class="nested"><div class="decl" id="clause_control_raw2"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_control_raw2">clause<span class="dash">-</span>control<span class="dash">-</span>raw2</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">x1</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">x2</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <a class="pp" href="#type_space_resume_context"><span class="tp">resume<span class="dash">-</span>context</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>resume<span class="dash">-</span>context: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">E</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">e1</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause2"><span class="tp">clause2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause2: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_control2"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_control2">clause<span class="dash">-</span>control2</a></span>( <span class="tp tpp">clause</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">x1</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">x2</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">k</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a1</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause2"><span class="tp">clause2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause2: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_never2"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_never2">clause<span class="dash">-</span>never2</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause2"><span class="tp">clause2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause2: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_tail_noop2"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_tail_noop2">clause<span class="dash">-</span>tail<span class="dash">-</span>noop2</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause2"><span class="tp">clause2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause2: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div></div><div class="decl" id="clause_tail2"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#clause_tail2">clause<span class="dash">-</span>tail2</a></span>( <span class="tp tpp">op</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a1</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_clause2"><span class="tp">clause2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>clause2: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>, (<span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div></div></div></div>
<div class="decl" id="type_space_ev"><div class="header code"><span class="def"><span class="kw">type</span>&nbsp;<span class="tp"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_hnd-source.html#type_space_ev"><span class="tp">ev</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>ev: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a></span></span><span class="tp">&lt;<span class="tp tv">a</span>&gt;</span></div><div class="doc koka comment">

<p>Effect handler evidence of a handler <code class="koka"><span class="tp tv">h</span></code> in the context.
</p></li></ul>
</div><div class="nested"><div class="decl" id="ev_fs__eq__eq_"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#ev_fs__eq__eq_"><span class="lq">ev<span class="fslash">/</span></span>(==)</a></span>( <a class="pp" href="#type_space_ev"><span class="tp">ev</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>ev: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span>, <a class="pp" href="#type_space_ev"><span class="tp">ev</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>ev: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">Evidence equality compares the markers.
</p></div></div></div></div>
<div class="decl" id="type_space_ev_index"><div class="header code"><span class="def"><span class="kw">alias</span>&nbsp;<span class="tp"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_hnd-source.html#type_space_ev_index"><span class="tp">ev<span class="dash">-</span>index</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>ev<span class="dash">-</span>index: <span class="co">V</span></span></a></span></span><span class="tp"></span>&nbsp;<span class="kw">=</span>&nbsp;<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_ssize__t"><span class="tp">ssize&#95;t</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ssize&#95;t: <span class="co">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">Index into an evidence vector.
</p></div></div>
<div class="decl" id="type_space_htag"><div class="header code"><span class="def"><span class="kw">type</span>&nbsp;<span class="tp"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_hnd-source.html#type_space_htag"><span class="tp">htag</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>htag: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a></span></span><span class="tp">&lt;<span class="tp tv">a</span>&gt;</span></div><div class="doc koka comment">

<p class="p noindent">The tag of a handler identifies the type at runtime (e.g. <code class="koka"><span class="st">&#34;exn/core/std&#34;</span></code>).
</p></div><div class="nested"><div class="decl" id="htag_fs_show"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#htag_fs_show"><span class="lq">htag<span class="fslash">/</span></span>show</a></span>( <a class="pp" href="#type_space_htag"><span class="tp">htag</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>htag: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">Show a handler tag.
</p></div></div></div></div>
<div class="decl" id="type_space_resume_context"><div class="header code"><span class="def"><span class="kw">type</span>&nbsp;<span class="tp"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_hnd-source.html#type_space_resume_context"><span class="tp">resume<span class="dash">-</span>context</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>resume<span class="dash">-</span>context: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">E</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a></span></span><span class="tp">&lt;<span class="tp tv">a</span>,<span class="tp tv">e</span>,<span class="tp tv">e1</span>,<span class="tp tv">b</span>&gt;</span></div><div class="nested"><div class="decl" id="finalize"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#finalize">finalize</a></span>( <span class="tp tpp">r</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_resume_context"><span class="tp">resume<span class="dash">-</span>context</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>resume<span class="dash">-</span>context: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">E</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">e1</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span>, <span class="tp tpp">x</span> <span class="tp sp">:</span>&nbsp;<span class="tp tv">b</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <span class="tp tv">b</span></div></div><div class="decl" id="resume"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#resume">resume</a></span>( <span class="tp tpp">r</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_resume_context"><span class="tp">resume<span class="dash">-</span>context</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>resume<span class="dash">-</span>context: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">E</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">e1</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span>, <span class="tp tpp">x</span> <span class="tp sp">:</span>&nbsp;<span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <span class="tp tv">b</span></div></div><div class="decl" id="resume_shallow"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#resume_shallow">resume<span class="dash">-</span>shallow</a></span>( <span class="tp tpp">r</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_resume_context"><span class="tp">resume<span class="dash">-</span>context</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>resume<span class="dash">-</span>context: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">E</span>, <span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">e1</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span>, <span class="tp tpp">x</span> <span class="tp sp">:</span>&nbsp;<span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e1</span> <span class="tp tv">b</span></div></div></div></div>
<div class="decl" id="type_space_yield_info"><div class="header code"><span class="def"><span class="kw">type</span>&nbsp;<span class="tp"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_hnd-source.html#type_space_yield_info"><span class="tp">yield<span class="dash">-</span>info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>yield<span class="dash">-</span>info: <span class="co">V</span></span></a></span></span><span class="tp"></span></div><div class="nested"><div class="decl" id="unsafe_reyield"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#unsafe_reyield">unsafe<span class="dash">-</span>reyield</a></span>( <span class="tp tpp">yld</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_yield_info"><span class="tp">yield<span class="dash">-</span>info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>yield<span class="dash">-</span>info: <span class="co">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <span class="tp tv">a</span></div></div></div></div>
<div class="decl" id="finally"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#finally">finally</a></span>( <span class="tp tpp">fin</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp sp">(</span><span class="tp sp">)</span>, <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <span class="tp tv">a</span></div></div>
<div class="decl" id="initially"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#initially">initially</a></span>( <span class="tp tpp">init</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp sp">(</span><span class="tp sp">)</span>, <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <span class="tp tv">a</span></div></div>
<div class="decl" id="local_var"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#local_var">local<span class="dash">-</span>var</a></span>( <span class="tp tpp">init</span> <span class="tp sp">:</span>&nbsp;<span class="tp tv">a</span>, <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">l</span> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_local_var"><span class="tp">local<span class="dash">-</span>var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">b</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">b</span></div></div>
<div class="decl" id="unsafe_try_finalize"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#unsafe_try_finalize">unsafe<span class="dash">-</span>try<span class="dash">-</span>finalize</a></span>( <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_either"><span class="tp">either</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>either: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_yield_info"><span class="tp">yield<span class="dash">-</span>info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>yield<span class="dash">-</span>info: <span class="co">V</span></span></a><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div></div>
<div class="decl" id="yield_bind"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#yield_bind">yield<span class="dash">-</span>bind</a></span>( <span class="tp tpp">x</span> <span class="tp sp">:</span>&nbsp;<span class="tp tv">a</span>, <span class="tp tpp">next</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <span class="tp tv">b</span></div></div>
<div class="decl" id="yield_bind2"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#yield_bind2">yield<span class="dash">-</span>bind2</a></span>( <span class="tp tpp">x</span> <span class="tp sp">:</span>&nbsp;<span class="tp tv">a</span>, <span class="tp tpp">extend</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span>, <span class="tp tpp">next</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <span class="tp tv">b</span></div></div>
<div class="decl" id="yield_extend"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#yield_extend">yield<span class="dash">-</span>extend</a></span>( <span class="tp tpp">next</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <span class="tp tv">b</span></div></div>
<div class="decl" id="yielding"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#yielding">yielding</a></span>()<span class="tp sp">:</span>&nbsp;<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a></div></div>
<div class="decl" id="yielding_non_final"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_core_hnd-source.html#yielding_non_final">yielding<span class="dash">-</span>non<span class="dash">-</span>final</a></span>()<span class="tp sp">:</span>&nbsp;<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a></div></div>
<div class="decl" id="-private-imports"><div class="header code"><span class="def"><span class="kw">private import</span>&nbsp;<span class="code"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#_null_"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types</span></span></a></span>, <span class="code"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_undiv.html#_null_"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>undiv</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>undiv</span></span></a></span></span></div></div>
</body>
</html>

<span data-line=""></span>