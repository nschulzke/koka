<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=1.0" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>regex.kk documentation</title>
</head>

<body class="koka doc body madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2012-2021, Microsoft Research, Daan Leijen.

  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the LICENSE file at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Regular expressions.

   The regular expressions conform to the regular expressions of JavaScript
   as described at &lt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular&#95;Expressions&gt;
&#42;/</span>
<span class="kw">module</span> <a class="pp" href="std_text_regex.html#_null_"><span class="mo">std/text/regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex</span></span></a>

<span class="kw">import</span> <a class="pp" href="std_num_int32.html#_null_"><span class="mo">std/num/int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>int32</span></span></a>

<span class="kw">extern</span> <span class="kw">import</span>
  c { conan<span class="kw">=</span><span class="st">"pcre2/[&gt;=10.37]"</span>; vcpkg<span class="kw">=</span><span class="st">"pcre2"</span>; library<span class="kw">=</span><span class="st">"pcre2-8"</span> }

<span class="kw">extern</span> <span class="kw">import</span>
  cs file <span class="st">"regex-inline.cs"</span>
  js file <span class="st">"regex-inline.js"</span>
  c  file <span class="st">"regex-inline.c"</span>


<span class="comment">// Abstract type of a regular expression object
</span><span class="decl-value type" id="type_space_regex"><span class="kw">abstract</span> <span class="kw">value</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Regex"><a class="pp" href="std_text_regex.html#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a>( <a class="pp" href="std_text_regex.html#regex_fs_obj">obj<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span><span class="lq">regex<span class="fslash">/</span></span>obj: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">any</span></span></a><span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_any"><span class="tp">any</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>any: <span class="co">V</span></span></a>, <a class="pp" href="std_text_regex.html#regex_fs_src">src<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span><span class="lq">regex<span class="fslash">/</span></span>src: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> </span></span>)

<span class="comment">// Return the pattern as a string
</span><span class="decl-fun" id="source"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#source">source<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>source: <span class="tp sp">(</span><span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a><span class="kw op">.</span><a class="pp" href="#regex_fs_src">src<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span><span class="lq">regex<span class="fslash">/</span></span>src: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a></span>

<span class="decl-fun" id="regex_create"><span class="kw">extern</span> <a class="pp" href="std_text_regex.html#regex_create">regex-create<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex<span class="dash">-</span>create: <span class="tp sp">(</span><span class="tp tpp">source</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignore<span class="dash">-</span>case</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multi<span class="dash">-</span>line</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">any</span></span></a>(<a class="pp">source<span class="pc">source: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">ignore-case<span class="pc">ignore<span class="dash">-</span>case: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>, <a class="pp">multi-line<span class="pc">multi<span class="dash">-</span>line: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_any"><span class="tp">any</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>any: <span class="co">V</span></span></a>
  c <span class="st">"kk&#95;regex&#95;create"</span>
  js <span class="st">"$regexCreate"</span>
  cs <span class="st">"RegEx.Create"</span></span>

<span class="decl-fun" id="regex_exec"><span class="kw">extern</span> <a class="pp" href="std_text_regex.html#regex_exec">regex-exec<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex<span class="dash">-</span>exec: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">any</span><span class="tp sp">,</span> <span class="tp tpp">str</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">start</span> <span class="tp kw op">:</span> <span class="tp">ssize&#95;t</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">regex<span class="pc">regex: <span class="tp">any</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_any"><span class="tp">any</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>any: <span class="co">V</span></span></a>, <a class="pp">str<span class="pc">str: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">start<span class="pc">start: <span class="tp">ssize&#95;t</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_ssize__t"><span class="tp">ssize&#95;t</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ssize&#95;t: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c  <span class="st">"kk&#95;regex&#95;exec"</span>
  js <span class="st">"$regexExec"</span>
  cs <span class="st">"RegEx.Exec"</span></span>

<span class="decl-fun" id="regex_exec_all"><span class="kw">extern</span> <a class="pp" href="std_text_regex.html#regex_exec_all">regex-exec-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex<span class="dash">-</span>exec<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">any</span><span class="tp sp">,</span> <span class="tp tpp">str</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">start</span> <span class="tp kw op">:</span> <span class="tp">ssize&#95;t</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp">ssize&#95;t</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">regex<span class="pc">regex: <span class="tp">any</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_any"><span class="tp">any</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>any: <span class="co">V</span></span></a>, <a class="pp">str<span class="pc">str: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">start<span class="pc">start: <span class="tp">ssize&#95;t</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_ssize__t"><span class="tp">ssize&#95;t</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ssize&#95;t: <span class="co">V</span></span></a>, <a class="pp">atmost<span class="pc">atmost: <span class="tp">ssize&#95;t</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_ssize__t"><span class="tp">ssize&#95;t</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ssize&#95;t: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span>
  c  <span class="st">"kk&#95;regex&#95;exec&#95;all"</span>
  js <span class="st">"$regexExecAll"</span>
  cs <span class="st">"RegEx.ExecAll"</span></span>


<span class="comment">// How many groups are captured by this regex?
</span><span class="decl-fun" id="groups_count"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#groups_count">groups-count<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups<span class="dash">-</span>count: <span class="tp sp">(</span><span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>
  <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a><span class="kw op">.</span><a class="pp" href="#source">source<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>source: <span class="tp sp">(</span><span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#string_fs_replace_all">replace-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span><span class="lq">string<span class="fslash">/</span></span>replace<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp" href="#rx_nongroup">rx-nongroup<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>rx<span class="dash">-</span>nongroup: <span class="tp">regex</span></span></a>,<a class="pp">""<span class="pc">literal: <span class="tp">string</span><br>count= 0</span></a>)<span class="kw op">.</span><a class="pp" href="std_core_string-source.html#count">count<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string<span class="fslash last">/</span></span>count: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a></span>;

<span class="decl-val" id="rx_nongroup"><span class="kw">val</span> <a class="pp" href="std_text_regex.html#rx_nongroup">rx-nongroup<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>rx<span class="dash">-</span>nongroup: <span class="tp">regex</span></span></a> <span class="kw">=</span> <a class="pp" href="#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<a class="pp">"[^\\\\\\[(]+|\\\\[\\s\\S]?|\\(\\?|\\[(?:[^\\\\\\]]|\\\\.)&#42;\\]"<span class="pc">literal: <span class="tp">string</span><br>count= 45</span></a></span>)

<span class="comment">// Create a new regular expression. Takes two optional parameters. Set &#96;ignoreCase&#96; to &#96;True&#96;
// to ignore uppercase/lowercase distinction. If  &#96;multiline&#96; is set to &#96;True&#96;, then &#96;^&#96; and &#96;$&#96;
// match also the beginning and end of every line (instead of the entire input).
</span><span class="decl-fun" id="regex"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>( <a class="pp">regex<span class="pc">regex: <span class="tp">string</span></span></a> <span class="tp kw op">:</span><a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">ignorecase<span class="pc">ignorecase: <span class="tp sp">?</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span><a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core_types-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a>, <a class="pp">multiline<span class="pc">multiline: <span class="tp sp">?</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core_types-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a>
  <a class="pp" href="#con_space_Regex"><span class="co">Regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>Regex: <span class="tp sp">(</span><span class="tp tpp">obj</span> <span class="tp kw op">:</span> <span class="tp">any</span><span class="tp sp">,</span> <span class="tp tpp">src</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<a class="pp" href="#regex_create">regex-create<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex<span class="dash">-</span>create: <span class="tp sp">(</span><span class="tp tpp">source</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignore<span class="dash">-</span>case</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multi<span class="dash">-</span>line</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">any</span></span></a>(<a class="pp">regex<span class="pc">regex: <span class="tp">string</span></span></a>,<a class="pp">ignorecase<span class="pc">ignorecase: <span class="tp">bool</span></span></a>,<a class="pp">multiline<span class="pc">multiline: <span class="tp">bool</span></span></a>), <a class="pp">regex<span class="pc">regex: <span class="tp">string</span></span></a>)</span>;


<span class="comment">// Find a match for a regular expression.
// See also &#96;find&#96; and &#96;contains&#96;
</span><span class="decl-fun" id="exec"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#exec">exec<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>exec: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">regex<span class="pc">regex: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span><a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a>, <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <a class="pp" href="#regex_exec">regex-exec<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex<span class="dash">-</span>exec: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">any</span><span class="tp sp">,</span> <span class="tp tpp">str</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">start</span> <span class="tp kw op">:</span> <span class="tp">ssize&#95;t</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">regex<span class="pc">regex: <span class="tp">regex</span></span></a><span class="kw op">.</span><a class="pp" href="#regex_fs_obj">obj<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span><span class="lq">regex<span class="fslash">/</span></span>obj: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">any</span></span></a>,<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>,<a class="pp">0<span class="pc">literal: <span class="tp">int</span><br>dec  = 0<br>hex8 = 0x00<br>bit8 = 0b00000000</span></a><span class="kw op">.</span><a class="pp" href="std_core_int-source.html#ssize__t">ssize&#95;t<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>int<span class="fslash last">/</span></span>ssize&#95;t: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ssize&#95;t</span></span></a></span>)

<span class="comment">// Match a regular expression &#96;regex&#96; over a string &#96;s&#96;.
// Matches at most &#96;atmost&#96; times (and matches all by default).
// Returns always an odd number of elements where every even
// element is a match and the odd ones the string parts between the
// matches.
// See also &#96;find-all&#96; and &#96;strings&#96;.
</span><span class="decl-fun" id="exec_all"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#exec_all">exec-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>exec<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">regex<span class="pc">regex: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a>, <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">atmost<span class="pc">atmost: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">-1<span class="pc">literal: <span class="tp">int</span><br>dec  = -1<br>hex8 = 0xFF<br>bit8 = 0b11111111</span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span>
  <a class="pp" href="#regex_exec_all">regex-exec-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex<span class="dash">-</span>exec<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">any</span><span class="tp sp">,</span> <span class="tp tpp">str</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">start</span> <span class="tp kw op">:</span> <span class="tp">ssize&#95;t</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp">ssize&#95;t</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">regex<span class="pc">regex: <span class="tp">regex</span></span></a><span class="kw op">.</span><a class="pp" href="#regex_fs_obj">obj<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span><span class="lq">regex<span class="fslash">/</span></span>obj: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">any</span></span></a>,<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>,<a class="pp">0<span class="pc">literal: <span class="tp">int</span><br>dec  = 0<br>hex8 = 0x00<br>bit8 = 0b00000000</span></a><span class="kw op">.</span><a class="pp" href="std_core_int-source.html#ssize__t">ssize&#95;t<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>int<span class="fslash last">/</span></span>ssize&#95;t: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ssize&#95;t</span></span></a>,<a class="pp">atmost<span class="pc">atmost: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_int-source.html#ssize__t">ssize&#95;t<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>int<span class="fslash last">/</span></span>ssize&#95;t: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ssize&#95;t</span></span></a></span>)


<span class="comment">// Return the full matched string of a capture group
</span><span class="decl-fun" id="captured"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#captured">captured<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>captured: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">matched<span class="pc">matched: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <span class="kw">match</span> <a class="pp">matched<span class="pc">matched: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>
    <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">sslice</span></span></a>) <span class="kw op">-></span> <a class="pp">s<span class="pc">s: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_sslice-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
    &#95;       <span class="kw op">-></span> <a class="pp">""<span class="pc">literal: <span class="tp">string</span><br>count= 0</span></a></span>


<span class="comment">// Return the full matched string part for a list of matched capture groups.
</span><span class="decl-fun" id="captures"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#captures">captures<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>captures: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_list-source.html#map">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>list<span class="fslash last">/</span></span>map: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#captured">captured<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>captured: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a></span>)


<span class="comment">// Find a match for a regular expression.
// See also &#96;exec&#96;
</span><span class="decl-fun" id="find"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#find">find<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>find: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>,  <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="kw">match</span> <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a><span class="kw op">.</span><a class="pp" href="#exec">exec<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>exec: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>)
    <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">m<span class="pc">m: <span class="tp">sslice</span></span></a>) <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">m<span class="pc">m: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_sslice-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)
    &#95;       <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a></span>


<span class="comment">// Does a regular expression pattern occur in a string &#96;s&#96;?
// (note: called &#96;test&#96; in javascript)
</span><span class="decl-fun" id="contains"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#contains">contains<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>contains: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a><span class="kw op">.</span><a class="pp" href="#exec">exec<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>exec: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core_types-source.html#is_cons">is-cons<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>is<span class="dash">-</span>cons: <span class="tp sp">(</span><span class="tp tpp">list</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a></span>


<span class="comment">// Filter only for the matched parts.
</span><span class="decl-fun" id="filter_matches"><span class="kw">fun</span> <a class="pp" href="std_text_regex.html#filter_matches">filter-matches<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>filter<span class="dash">-</span>matches: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span>
  <span class="kw">match</span> <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>
    <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(&#95;,<a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">m<span class="pc">m: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">mm<span class="pc">mm: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>)) <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">m<span class="pc">m: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>,<a class="pp" href="#filter_matches">filter-matches<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>filter<span class="dash">-</span>matches: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">mm<span class="pc">mm: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>))
    &#95;                  <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a></span>


<span class="comment">// Find all matches for a regular expression in a string.
</span><span class="decl-fun" id="find_all"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#find_all">find-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>find<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>,  <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a>, <a class="pp">atmost<span class="pc">atmost: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">-1<span class="pc">literal: <span class="tp">int</span><br>dec  = -1<br>hex8 = 0xFF<br>bit8 = 0b11111111</span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a><span class="kw op">.</span><a class="pp" href="#exec_all">exec-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>exec<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>,<a class="pp">atmost<span class="pc">atmost: <span class="tp">int</span></span></a>)<span class="kw op">.</span><a class="pp" href="#filter_matches">filter-matches<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>filter<span class="dash">-</span>matches: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="#captures">captures<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>captures: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a></span>


<span class="decl-fun" id="concat_replace"><span class="kw">fun</span> <a class="pp" href="std_text_regex.html#concat_replace">concat-replace<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>concat<span class="dash">-</span>replace: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">matches</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">acc</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">string</span></span></a>( <a class="pp">matches<span class="pc">matches: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span>, <a class="pp">repl<span class="pc">repl: <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">372</span> string</span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp kw op">-></span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="number">437</span> string</span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <span class="kw">match</span> <a class="pp">matches<span class="pc">matches: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>
    <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">pre<span class="pc">pre: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>,<a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">m<span class="pc">m: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">mm<span class="pc">mm: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>)) <span class="kw op">-></span> <a class="pp" href="#concat_replace">concat-replace<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>concat<span class="dash">-</span>replace: <span class="tp sp">(</span><span class="tp tpp">matches</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">372</span> string, acc <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span>) <span class="kw op">-></span> <span class="op">$</span><span class="number">372</span> string</span></a>( <a class="pp">mm<span class="pc">mm: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>, <a class="pp">repl<span class="pc">repl: <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">372</span> string</span></a>, <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">repl<span class="pc">repl: <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">372</span> string</span></a>(<a class="pp">m<span class="pc">m: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>), <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">pre<span class="pc">pre: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="#captured">captured<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>captured: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">372</span> string</span></a>,<a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>)))
    <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">post<span class="pc">post: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>,<a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>)       <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">post<span class="pc">post: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="#captured">captured<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>captured: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">372</span> string</span></a>,<a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core_list-source.html#reverse_join">reverse-join<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>list<span class="fslash last">/</span></span>reverse<span class="dash">-</span>join: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">372</span> string</span></a>
    <a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_list-source.html#reverse_join">reverse-join<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>list<span class="fslash last">/</span></span>reverse<span class="dash">-</span>join: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">372</span> string</span></a></span>


<span class="comment">// Replace the all occurrences of &#96;regex&#96; by the result of the replacement fun &#96;repl&#96; in a string &#96;s&#96;.
</span><span class="decl-fun" id="replace_all"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#replace_all">replace-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>replace<span class="dash">-</span>all: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">string</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a>, <a class="pp">repl<span class="pc">repl: <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">441</span> string</span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp kw op">-></span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">atmost<span class="pc">atmost: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">-1<span class="pc">literal: <span class="tp">int</span><br>dec  = -1<br>hex8 = 0xFF<br>bit8 = 0b11111111</span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="number">471</span> string</span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a><span class="kw op">.</span><a class="pp" href="#exec_all">exec-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>exec<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">441</span> list<span class="op">&lt;</span>list<span class="op">&lt;</span>sslice<span class="op">&gt;</span><span class="op">&gt;</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>, <a class="pp">atmost<span class="pc">atmost: <span class="tp">int</span></span></a> )<span class="kw op">.</span><a class="pp" href="#concat_replace">concat-replace<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>concat<span class="dash">-</span>replace: <span class="tp sp">(</span><span class="tp tpp">matches</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">441</span> string, acc <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span>) <span class="kw op">-></span> <span class="op">$</span><span class="number">441</span> string</span></a>(<a class="pp">repl<span class="pc">repl: <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">441</span> string</span></a>,<a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a></span>)

<span class="comment">// Replace the first occurrence of &#96;regex&#96; by the result of the replacement fun &#96;repl&#96; in a string &#96;s&#96;.
</span><span class="decl-fun" id="replace"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#replace">replace<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>replace: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">string</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a>, <a class="pp">repl<span class="pc">repl: <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">692</span> string</span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp kw op">-></span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="number">721</span> string</span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#replace_all">replace-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>replace<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">692</span> string, atmost <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span>) <span class="kw op">-></span> <span class="op">$</span><span class="number">692</span> string</span></a>( <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a>, <a class="pp">repl<span class="pc">repl: <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp op">$</span><span class="number">692</span> string</span></a>, <a class="pp">1<span class="pc">literal: <span class="tp">int</span><br>dec  = 1<br>hex8 = 0x01<br>bit8 = 0b00000001</span></a> </span>)


<span class="comment">// Check if a capture group was matched.
</span><span class="decl-fun" id="matched"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#matched">matched<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>matched: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">sslice</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  <a class="pp">s<span class="pc">s: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_sslice-source.html#is_valid">is-valid<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>is<span class="dash">-</span>valid: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a></span>

<span class="comment">// Replace using a replacement string that can contain &#96;$$&#96; for a &#96;$&#96; sign, &#96;$n&#96; for a capture group,
// &#96;$&amp;&#96; for the entire match &#96;==$0&#96;.
</span><span class="decl-fun" id="replace_captures"><span class="kw">fun</span> <a class="pp" href="std_text_regex.html#replace_captures">replace-captures<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>replace<span class="dash">-</span>captures: <span class="tp sp">(</span><span class="tp tpp">caps</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">caps<span class="pc">caps: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>, <a class="pp">repl<span class="pc">repl: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <a class="pp" href="#replace_all">replace-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>replace<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">repl<span class="pc">repl: <span class="tp">string</span></span></a>, <a class="pp" href="#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<a class="pp">"\\$(?:(\\d)|(\\&amp;)|(\\$))"<span class="pc">literal: <span class="tp">string</span><br>count= 20</span></a>) )  <a class="pp"><span class="kw">fn</span><span class="pc">fn: <span class="tp sp">(</span><span class="tp tpp">cap</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">cap<span class="pc">cap: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>)
    <span class="kw">match</span> <a class="pp">cap<span class="pc">cap: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>
      [<a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">&#95;</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>,<a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">digit</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>,<a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">amp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>,<a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">dollar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span>
        <span class="kw">if</span> <a class="pp">dollar<span class="pc">dollar: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_sslice-source.html#is_valid">is-valid<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>is<span class="dash">-</span>valid: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="kw">then</span> <a class="pp">"$"<span class="pc">literal: <span class="tp">string</span><br>count= 1</span></a> <span class="kw">else</span>
          <span class="kw">val</span> <a class="pp">grp<span class="pc">grp: <span class="tp">int</span></span></a> <span class="kw">=</span> <span class="kw">if</span> <a class="pp">amp<span class="pc">amp: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_sslice-source.html#is_valid">is-valid<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>is<span class="dash">-</span>valid: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="kw">then</span> <a class="pp">0<span class="pc">literal: <span class="tp">int</span><br>dec  = 0<br>hex8 = 0x00<br>bit8 = 0b00000000</span></a> <span class="kw">else</span> <a class="pp" href="std_core_int-source.html#parse_int">parse-int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>int<span class="fslash last">/</span></span>parse<span class="dash">-</span>int: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">hex</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">int</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">digit<span class="pc">digit: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_sslice-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core_maybe-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>maybe<span class="fslash last">/</span></span>default: <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">int</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">0<span class="pc">literal: <span class="tp">int</span><br>dec  = 0<br>hex8 = 0x00<br>bit8 = 0b00000000</span></a>)
          <span class="kw">match</span> <a class="pp">caps<span class="pc">caps: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>[<a class="pp">grp<span class="pc">grp: <span class="tp">int</span></span></a>]
            <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp">""<span class="pc">literal: <span class="tp">string</span><br>count= 0</span></a>
            <a class="pp" href="std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">sslice</span></span></a>) <span class="kw op">-></span> <a class="pp">s<span class="pc">s: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_sslice-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>


      &#95; <span class="kw op">-></span> <a class="pp">"$"<span class="pc">literal: <span class="tp">string</span><br>count= 1</span></a></span>


<span class="comment">// Replace all occurrences of &#96;regex&#96; with the replacement string &#96;repl&#96; in a string &#96;s&#96;.
// The replacement string can contain &#96;$$&#96; for a &#96;$&#96; sign, &#96;$n&#96; for a capture group,
// &#96;$&amp;&#96; for the entire match &#96;==$0&#96;.
</span><span class="decl-fun" id="string_fs_replace_all"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#string_fs_replace_all">string/replace-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span><span class="lq">string<span class="fslash">/</span></span>replace<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">regex<span class="pc">regex: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a>, <a class="pp">repl<span class="pc">repl: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">atmost<span class="pc">atmost: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">-1<span class="pc">literal: <span class="tp">int</span><br>dec  = -1<br>hex8 = 0xFF<br>bit8 = 0b11111111</span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <span class="kw">if</span> (<a class="pp">repl<span class="pc">repl: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_string-source.html#contains">contains<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string<span class="fslash last">/</span></span>contains: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sub</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">"$"<span class="pc">literal: <span class="tp">string</span><br>count= 1</span></a>))
    <span class="kw">then</span> <a class="pp" href="#replace_all">replace-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>replace<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>, <a class="pp">regex<span class="pc">regex: <span class="tp">regex</span></span></a>, <a class="pp"><span class="kw">fn</span><span class="pc">fn: <span class="tp sp">(</span><span class="tp tpp">caps</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">caps<span class="pc">caps: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>){ <a class="pp" href="#replace_captures">replace-captures<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>replace<span class="dash">-</span>captures: <span class="tp sp">(</span><span class="tp tpp">caps</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">caps<span class="pc">caps: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">repl<span class="pc">repl: <span class="tp">string</span></span></a>) }, <a class="pp">atmost<span class="pc">atmost: <span class="tp">int</span></span></a>)
    <span class="kw">else</span> <a class="pp" href="#replace_all">replace-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>replace<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>, <a class="pp">regex<span class="pc">regex: <span class="tp">regex</span></span></a>, <a class="pp"><span class="kw">fn</span><span class="pc">fn: <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(&#95;){ <a class="pp">repl<span class="pc">repl: <span class="tp">string</span></span></a> }, <a class="pp">atmost<span class="pc">atmost: <span class="tp">int</span></span></a></span>)

<span class="comment">// Replace the first occurrence of &#96;regex&#96; with a replacement string &#96;repl&#96; in a string &#96;s&#96;.
// The replacement string can contain &#96;$$&#96; for a &#96;$&#96; sign, &#96;$n&#96; for a capture group,
// &#96;$&amp;&#96; for the entire match &#96;==$0&#96;.
</span><span class="decl-fun" id="string_fs_replace"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#string_fs_replace">string/replace<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span><span class="lq">string<span class="fslash">/</span></span>replace: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">regex<span class="pc">regex: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a>, <a class="pp">repl<span class="pc">repl: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <a class="pp" href="#string_fs_replace_all">replace-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span><span class="lq">string<span class="fslash">/</span></span>replace<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>, <a class="pp">regex<span class="pc">regex: <span class="tp">regex</span></span></a>, <a class="pp">repl<span class="pc">repl: <span class="tp">string</span></span></a>, <a class="pp">1<span class="pc">literal: <span class="tp">int</span><br>dec  = 1<br>hex8 = 0x01<br>bit8 = 0b00000001</span></a> </span>)


<span class="comment">// Filter only for the non-matched parts.
</span><span class="decl-fun" id="filter_non_matches"><span class="kw">fun</span> <a class="pp" href="std_text_regex.html#filter_non_matches">filter-non-matches<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>filter<span class="dash">-</span>non<span class="dash">-</span>matches: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_sslice-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>sslice<span class="fslash last">/</span></span>sslice: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span>
  <span class="kw">match</span> <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>
    <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>,<a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(&#95;,<a class="pp">xx<span class="pc">xx: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>)) <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>,<a class="pp" href="#filter_non_matches">filter-non-matches<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>filter<span class="dash">-</span>non<span class="dash">-</span>matches: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">xx<span class="pc">xx: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>))
    <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>,<a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>)        <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Cons"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp">s<span class="pc">s: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
    &#95;                  <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a></span><a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>


<span class="comment">// Split a string &#96;s&#96; in at most &#96;atmost&#96; parts using a regular expression &#96;r&#96; as separator.
</span><span class="decl-fun" id="split"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#split">split<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>split: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_regex"><span class="tp">regex</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="co">V</span></span></a>, <a class="pp">atmost<span class="pc">atmost: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">-1<span class="pc">literal: <span class="tp">int</span><br>dec  = -1<br>hex8 = 0xFF<br>bit8 = 0b11111111</span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <a class="pp">r<span class="pc">r: <span class="tp">regex</span></span></a><span class="kw op">.</span><a class="pp" href="#exec_all">exec-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>exec<span class="dash">-</span>all: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atmost</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>,<a class="pp">atmost<span class="pc">atmost: <span class="tp">int</span></span></a>)<span class="kw op">.</span><a class="pp" href="#filter_non_matches">filter-non-matches<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>filter<span class="dash">-</span>non<span class="dash">-</span>matches: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="#captures">captures<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>captures: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a></span>

<span class="decl-fun" id="testabc"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_text_regex.html#testabc">testabc<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>testabc: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a>
  <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#contains">contains<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>contains: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">r</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp" href="#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<a class="pp">"[ab]+c"<span class="pc">literal: <span class="tp">string</span><br>count= 6</span></a>)</span>)

<span class="comment">/&#42;
// Split a string &#96;s&#96; over separator &#96;sep&#96; where &#96;sep&#96; does not occur in
// &#95;tokens&#95; matching &#96;exclude&#96;.
// For example: &#96;&#96;split-exclude("comma,'sep,arated',values", regex(","),regex("'[^']&#42;'|[^',]"))&#96;&#96;
pub fun split-exclude( s : string, sep : regex, exclude : regex ) : list&lt;string&gt;

  if s=="" then [] else
    val splitr = regex( r"^(?:((?:" ++ exclude.source ++ ")+)|(" ++ sep.source ++ "))")
    s.split-excludex(splitr,"")


fun split-excludex( s : string, splitr : regex, acc : string ) : list&lt;string&gt;

  if s=="" return [acc]
  match( s.find(splitr) )
    Nothing -&gt; split-excludex( pretend-decreasing(s.tail), splitr, acc ++ s.head) // todo: improve efficiency?
    Just(cap) -&gt;
      if (cap.groups.matched(1))
        split-excludex( pretend-decreasing(cap.after1), splitr, acc ++ cap.matched)

      else
        Cons(acc, split-excludex( pretend-decreasing(cap.after1), splitr, "")) // todo: make tail recursive
&#42;/</span></pre>

</body>
</html>
