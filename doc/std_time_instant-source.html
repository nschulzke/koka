<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=1.0" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>instant.kk documentation</title>
</head>

<body class="koka doc body madoko">
<pre class="koka source"><span class="comment">/&#42;----------------------------------------------------------------------------
   Copyright 2012-2021, Microsoft Research, Daan Leijen

   Licensed under the Apache License, Version 2.0 ("The Licence"). You may not
   use this file except in compliance with the License. A copy of the License
   can be found in the LICENSE file at the root of this distribution.
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Instants in time.

Instants use the mighty 128-bit &#96;:ddouble&#96; timestamps to represent a &#96;:duration&#96;
since the &#96;epoch&#96;.
This gives very high range and precision (up 31 decimal digits).
It spans about 10^300^ years
into the past and future, well beyond the expected life span of the universe.
Any time can be expressed with atto-second (10^-18^) precision
up to about 300,000 years in the past and future, and with pico-second (10^-12^)
precision any time since the age of the universe (about 13.8 billion years ago)
up to 30 billion years into the future. For durations under 300 years, the precision
is in excess of a zepto second (10^-21^). For comparison, it takes light about
500 zepto-seconds to travel the length of an hydrogen atom.

&#96;&#96;&#96;unchecked
&gt; instant(2100,1,1,0,0,0,1.0e-21).show(21)  // 1 zepto-second after Jan 1, 2100
"3155760037.000000000000000000001s"
&gt; instant(300000,1,1,0,0,0,1.0e-18).show(18) // 1 atto-second after Jan 1, 300000
"9403971696037.000000000000000001s"
&gt; instant(-13.82e9.int,1,1,0,0,0,1.0e-12).show(12) // 1 pico-second after the birth of the universe
"-436117139753903999.999999999999s"
&#96;&#96;&#96;

Internally, instants are represented in a certain time scale (&#96;:timescale&#96;) for
efficiency and precision. They automatically convert between different time scales
when necessary (for example when comparing instants in time, or calculating durations
between UTC calendar times).

Time durations (&#96;:duration&#96;) are always in SI seconds (as measured on the Earth's geoid).

## References { - }

~ Begin Bibliography { caption:"9" }

~~ BibItem { #blackbody; bibitem-label:"[1]"; searchterm:"Claudine+Thomas+Accuracy+of+TAI" }
Claudine Thomas,
&#95;The Accuracy of TAI&#95;.
Proceedings of the 29th Annual Precise Time and Time Interval Systems and Applications Meeting,
Long Beach, California, December 1997, pp. 19--26. [pdf](https://tycho.usno.navy.mil/ptti/1997papers/Vol%2029&#95;02.pdf)
~~

~ End Bibliography

\/
&#42;/</span>
<span class="kw">module</span> <a class="pp" href="std_time_instant.html#_null_"><span class="mo">std/time/instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant</span></span></a>

<span class="kw">import</span> <a class="pp" href="std_num_ddouble.html#_null_"><span class="mo">std/num/ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble</span></span></a>
<span class="kw">import</span> <a class="pp" href="std_time_timestamp.html#_null_"><span class="mo">std/time/timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp</span></span></a>
<span class="kw">import</span> <a class="pp" href="std_time_duration.html#_null_"><span class="mo">std/time/duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration</span></span></a>
<span class="kw">import</span> <a class="pp" href="std_time_date.html#_null_"><span class="mo">std/time/date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date</span></span></a>

<span class="comment">/&#42;----------------------------------------------------------------------------
  Timescale
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">// A time scale defines how time is measured: the rate and unit of time,
// and how it can be converted to- and from TAI.\
// For time calculations, usually the [TAI](https://en.wikipedia.org/wiki/International&#95;Atomic&#95;Time)
// (international atomic time) time scale (&#96;ts-tai&#96;) is used which is time measured as SI seconds on the Earths geoid.
// Another common time scale is UTC (&#96;std/time/utc/ts-utc&#96;) which also uses SI second time units but can contain leap seconds.
</span><span class="decl-reference type" id="type_space_timescale"><span class="kw">abstract</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Timescale"><a class="pp" href="std_time_instant.html#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>
  <span class="comment">// Time scale name, "TAI", "UTC", "UNIX", "TT", etc.
</span>  <span class="kw">pub</span> <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <span class="comment">// SI seconds: usually "TAI", but could be "TCG", "TCB", "TDB" etc.
</span>  <a class="pp">unit<span class="pc">unit: <span class="tp">string</span></span></a>        <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <span class="comment">// from duration since &#96;epoch&#96; to timestamp since epoch-y2k
</span>  <a class="pp">from-tai<span class="pc">from<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>    <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a>
  <span class="comment">// from timestamp since timescale-epoch to duration since &#96;epoch&#96;
</span>  <a class="pp">to-tai<span class="pc">to<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>      <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a>
  <span class="comment">// &#96;Nothing&#96; for fixed 86400s days, or
</span>  <span class="comment">// a function to return the seconds in the day of the given &#96;:dayspan&#96; (for leap seconds timescales only).
</span>  <a class="pp">mb-seconds-in-day<span class="pc">mb<span class="dash">-</span>seconds<span class="dash">-</span>in<span class="dash">-</span>day: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span><span class="tp kw op">:</span><a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_time_timestamp-source.html#type_space_timespan"><span class="tp">timespan</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="kw">=</span> <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
  <a class="pp">mb-to-mjd2000<span class="pc">mb<span class="dash">-</span>to<span class="dash">-</span>mjd2000: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span><span class="tp sp">&gt;</span></span></a>     <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span><span class="tp kw op">:</span><a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a><span class="tp sp">,</span><span class="tp tpp">tzdelta</span><span class="tp kw op">:</span><a class="pp" href="std_time_timestamp-source.html#type_space_timespan"><span class="tp">timespan</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="co">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="kw">=</span> <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
  <a class="pp">mb-from-mjd2000<span class="pc">mb<span class="dash">-</span>from<span class="dash">-</span>mjd2000: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span><span class="tp sp">&gt;</span></span></a>   <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">days</span><span class="tp kw op">:</span><a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a><span class="tp sp">,</span><span class="tp tpp">frac</span><span class="tp kw op">:</span><a class="pp" href="std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="co">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="kw">=</span> <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a></span></span>


<span class="comment">// Are two timescales the same?
</span><span class="decl-fun" id="timescale_fs__eq__eq_"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#timescale_fs__eq__eq_">timescale/(==)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">t1</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">t2</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">t1<span class="pc">t1: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>, <a class="pp">t2<span class="pc">t2: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  (<a class="pp">t1<span class="pc">t1: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="std_core_string-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">t2<span class="pc">t2: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a></span>)

<span class="comment">// Does this timescale have leap seconds?
</span><span class="decl-fun" id="has_leap_seconds"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#has_leap_seconds">has-leap-seconds<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>has<span class="dash">-</span>leap<span class="dash">-</span>seconds: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_mb_seconds_in_day">mb-seconds-in-day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>mb<span class="dash">-</span>seconds<span class="dash">-</span>in<span class="dash">-</span>day: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_types-source.html#is_just">is-just<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>is<span class="dash">-</span>just: <span class="tp sp">(</span><span class="tp tpp">maybe</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a></span>


<span class="comment">// Convert a timespan between time scales
</span><span class="decl-fun" id="convert"><span class="kw">fun</span> <a class="pp" href="std_time_instant.html#convert">convert<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>convert: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">from</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a>, <a class="pp">from<span class="pc">from: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>, <a class="pp">to<span class="pc">to: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">timestamp</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a>
  <span class="kw">if</span> <a class="pp">from<span class="pc">from: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="std_core_string-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">to<span class="pc">to: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="kw">then</span>
    <span class="comment">// already using the right time scale
</span>    <a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a>
  <span class="kw">elif</span> <a class="pp">from<span class="pc">from: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_unit">unit<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>unit: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="std_core_string-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">to<span class="pc">to: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_unit">unit<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>unit: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="std_core_types-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">from<span class="pc">from: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_unit">unit<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>unit: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="std_core_string-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">"UTC"<span class="pc">literal: <span class="tp">string</span><br>count= 3</span></a> <span class="kw">then</span>
    <span class="comment">// Optimization:
</span>    <span class="comment">// For UTC timescales we promise that the only difference is the
</span>    <span class="comment">// leap second table but the timestamps are valid for all
</span>    <a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a>
  <span class="kw">else</span>
    <span class="comment">// transform through TAI
</span>    <span class="comment">// trace( "convert: " + from.name + " -&gt; " + to.name +  ", t: " + t.show )
</span>    (<a class="pp">to<span class="pc">to: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_from_tai">from-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>from<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span><span class="tp sp">)</span></span></a>)( (<a class="pp">from<span class="pc">from: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_to_tai">to-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>to<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span><span class="tp sp">)</span></span></a>)(<a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a>) </span>)


<span class="comment">// Return the &#96;:duration&#96; since the &#96;epoch&#96; for a timestamp &#96;t&#96; interpreted in time scale &#96;ts&#96;.
</span><span class="decl-fun" id="to_tai"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#to_tai">to-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>to<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>(  <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>, <a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a>
  <a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="#convert">convert<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>convert: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">from</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a>,<a class="pp" href="#ts_tai">ts-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tai: <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#unsafe_duration">unsafe-duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>duration: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a></span>

<span class="comment">// Given a &#96;:duration&#96; since the &#96;epoch&#96;, return a &#96;:timespan&#96; for that instant in time scale &#96;ts&#96;.
</span><span class="decl-fun" id="from_tai"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#from_tai">from-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>from<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>, <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">timestamp</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a>
  <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#timestamp">timestamp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>timestamp: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="#convert">convert<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>convert: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">from</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp" href="#ts_tai">ts-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tai: <span class="tp">timescale</span></span></a>,<a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a></span>)

<span class="comment">/&#42;----------------------------------------------------------------------------
  Instant
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Represents a precise instant in time.

Internally, instants are represented in a certain time scale (&#96;:timescale&#96;) for
efficiency and precision. They automatically convert between different time scales
when necessary (for example when comparing instants in time, or calculating durations
between UTC calendar times).
&#42;/</span>
<span class="decl-value type" id="type_space_instant"><span class="kw">abstract</span> <span class="kw">value</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Instant"><a class="pp" href="std_time_instant.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp" href="std_time_instant.html#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a>   <span class="comment">// time since the 2000-01-01 in the timescale
</span>  <a class="pp" href="std_time_instant.html#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>    <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a></span></span>   <span class="comment">// the time scale (TAI, UTC, etc)
</span>

<span class="comment">// Return the time scale that instant &#96;i&#96; uses.
</span><span class="decl-fun" id="instant_fs_timescale"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#instant_fs_timescale">instant/timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a></span>

<span class="comment">// The seconds in the day of instant &#96;i&#96; (in its time scale).
</span><span class="decl-fun" id="seconds_in_day"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#seconds_in_day">seconds-in-day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>seconds<span class="dash">-</span>in<span class="dash">-</span>day: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">timespan</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timespan"><span class="tp">timespan</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="co">V</span></span></a>
  <span class="kw">match</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_mb_seconds_in_day">mb-seconds-in-day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>mb<span class="dash">-</span>seconds<span class="dash">-</span>in<span class="dash">-</span>day: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span><span class="tp sp">&gt;</span></span></a>
    <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="std_time_timestamp-source.html#solar_secs_per_day">solar-secs-per-day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>solar<span class="dash">-</span>secs<span class="dash">-</span>per<span class="dash">-</span>day: <span class="tp">timespan</span></span></a>
    <a class="pp" href="std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">f<span class="pc">f: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a>) <span class="kw op">-></span> <a class="pp">f<span class="pc">f: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a></span>)


<span class="comment">// Return &#96;:timestamp&#96; since 2000-01-01 in the time scale of the instant
</span><span class="decl-fun" id="instant_fs_timestamp"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#instant_fs_timestamp">instant/timestamp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>timestamp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">timestamp</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a></span>

<span class="comment">// Return days since 2000-01-01 in the time scale of the instant
</span><span class="decl-fun" id="days"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#days">days<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>days: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_timestamp-source.html#days">days<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>days: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a></span>

<span class="comment">// Return days since 2000-01-01 in the time scale of the instant,
// together with the clock on that day.
</span><span class="decl-fun" id="days_clock"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#days_clock">days-clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>days<span class="dash">-</span>clock: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">clock</span><span class="tp sp">)</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">clock</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_tuple2"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>tuple2: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp" href="std_time_date-source.html#type_space_clock"><span class="tp">clock</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock: <span class="co">V</span></span></a><span class="tp sp">)</span>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_timestamp-source.html#days_clock">days-clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>days<span class="dash">-</span>clock: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">clock</span><span class="tp sp">)</span></span></a></span>


<span class="comment">// Create an instant from a time stamp &#96;t&#96; interpreted in time scale &#96;ts&#96;.\
// Be careful to ensure that &#96;t&#96; should indeed be interpreted in the given time scale.
</span><span class="decl-fun" id="timescale_fs_instant"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#timescale_fs_instant">timescale/instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>, <a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp" href="#con_space_Instant"><span class="co">Instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>Instant: <span class="tp sp">(</span><span class="tp tpp">since</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a>, <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a></span>)

<span class="comment">// Return the instant at (TAI) SI seconds duration since the &#96;epoch&#96;.
</span><span class="decl-fun" id="duration_fs_instant"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#duration_fs_instant">duration/instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">duration<span class="fslash">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp" href="#timescale_fs_instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp" href="#ts_tai">ts-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tai: <span class="tp">timescale</span></span></a>, <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#timestamp">timestamp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>timestamp: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a></span>)

<span class="comment">// Return the instant in time scale &#96;ts&#96;, &#96;days&#96; and &#96;secs&#96; after 2000-01-01 in that timescale.
</span><span class="decl-fun" id="date_fs_instant"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#date_fs_instant">date/instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">date<span class="fslash">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">,</span> <span class="tp tpp">leap</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>, <a class="pp">days<span class="pc">days: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>, <a class="pp">secs<span class="pc">secs: <span class="tp">timespan</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timespan"><span class="tp">timespan</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="co">V</span></span></a>, <a class="pp">leap<span class="pc">leap: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">0<span class="pc">literal: <span class="tp">int</span><br>dec  = 0<br>hex8 = 0x00<br>bit8 = 0b00000000</span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp" href="std_time_timestamp-source.html#timestamp_days">timestamp-days<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp<span class="dash">-</span>days: <span class="tp sp">(</span><span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">timespan</span><span class="tp sp">,</span> <span class="tp tpp">leap</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp">days<span class="pc">days: <span class="tp">int</span></span></a>,<a class="pp">secs<span class="pc">secs: <span class="tp">timespan</span></span></a>,<a class="pp">leap<span class="pc">leap: <span class="tp">int</span></span></a>)</span>)

<span class="comment">// Return a &#96;:timestamp&#96; for instant &#96;i&#96; in a certain time scale &#96;tscale&#96;.
</span><span class="decl-fun" id="timestamp_in"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#timestamp_in">timestamp-in<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timestamp<span class="dash">-</span>in: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>  <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">timestamp</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="#convert">convert<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>convert: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">from</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>,<a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a></span>)

<span class="comment">// Return the (TAI) SI second duration since the &#96;epoch&#96; at this instant.
</span><span class="decl-fun" id="instant_fs_duration"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#instant_fs_duration">instant/duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>duration: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#timestamp_in">timestamp-in<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timestamp<span class="dash">-</span>in: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp" href="#ts_tai">ts-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tai: <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#unsafe_duration">unsafe-duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>duration: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a></span> <span class="comment">// ok, because SI seconds
</span>

<span class="comment">// Change the internal representation of an instant to use another timescale.
// Only used in special cases for efficiency. For example, when comparing an
// instant in TAI time to thousands of UTC times, it is more efficient to convert
// the TAI time to UTC first to avoid converting at each comparision.
</span><span class="decl-fun" id="use_timescale"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#use_timescale">use-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <span class="kw">if</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="std_core_string-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="kw">then</span>
    <span class="comment">// already using the right time scale
</span>    <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>

  <span class="kw">else</span>
    <a class="pp" href="#con_space_Instant"><span class="co">Instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>Instant: <span class="tp sp">(</span><span class="tp tpp">since</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#timestamp_in">timestamp-in<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timestamp<span class="dash">-</span>in: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a>), <a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a> </span>)


<span class="comment">// Round an instant to a certain precision (&#96;prec&#96; is number of digits of the fraction of the second).\
// Takes special care for instants that use a UTC timescale to round into leap seconds if appropriate.
</span><span class="decl-fun" id="round_to_prec"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <span class="kw">if</span> <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_int-source.html#is_neg">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>int<span class="fslash last">/</span></span>is<span class="dash">-</span>neg: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="kw">then</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>
  <span class="kw">elif</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#has_leap_seconds">has-leap-seconds<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>has<span class="dash">-</span>leap<span class="dash">-</span>seconds: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>
   <span class="comment">// Round on TAI representation instead; assumes the leap second time scale has TAI SI seconds (which UTC has)
</span>   <span class="comment">// TODO: optimize to first see if rounding makes a difference and only than use TAI rounding
</span>   <span class="comment">// TODO: optimize to first check if this is a leap day and only round via tai in that case.
</span>   <span class="kw">then</span> <a class="pp" href="#con_space_Instant"><span class="co">Instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>Instant: <span class="tp sp">(</span><span class="tp tpp">since</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#use_timescale">use-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp" href="#ts_tai">ts-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tai: <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_timestamp-source.html#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>), <a class="pp" href="#ts_tai">ts-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tai: <span class="tp">timescale</span></span></a> ) <span class="kw op">.</span><a class="pp" href="#use_timescale">use-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>)
   <span class="kw">else</span> <a class="pp" href="#con_space_Instant"><span class="co">Instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>Instant: <span class="tp sp">(</span><span class="tp tpp">since</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_timestamp-source.html#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>), <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a> </span>)

<span class="comment">// Compare two &#96;:instant&#96;s in time.
</span><span class="decl-fun" id="cmp"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#cmp">cmp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>cmp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">order</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_order"><span class="tp">order</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>order: <span class="co">V</span></span></a>
  <a class="pp" href="std_time_timestamp-source.html#cmp">cmp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>cmp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#use_timescale">use-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a></span>)

<span class="decl-fun" id="_lt_"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#_lt_">(&lt;)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(&lt;): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a>  <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#cmp">cmp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>cmp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a>) <a class="pp" href="std_core_order-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>order<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core_types-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_lt__eq_"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#_lt__eq_">(&lt;=)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(&lt;=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#cmp">cmp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>cmp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a>) <a class="pp" href="std_core_order-source.html#_excl__eq_">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>order<span class="fslash last">/</span></span>(!=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core_types-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_gt_"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#_gt_">(&gt;)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(&gt;): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a>  <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#cmp">cmp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>cmp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a>) <a class="pp" href="std_core_order-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>order<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core_types-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_gt__eq_"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#_gt__eq_">(&gt;=)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#cmp">cmp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>cmp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a>) <a class="pp" href="std_core_order-source.html#_excl__eq_">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>order<span class="fslash last">/</span></span>(!=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core_types-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_eq__eq_"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#_eq__eq_">(==)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#cmp">cmp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>cmp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a>) <a class="pp" href="std_core_order-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>order<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core_types-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_excl__eq_"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#_excl__eq_">(!=)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(!=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#cmp">cmp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>cmp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a>) <a class="pp" href="std_core_order-source.html#_excl__eq_">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>order<span class="fslash last">/</span></span>(!=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core_types-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> </span>}

<span class="comment">// The minimum of two instants.
</span><span class="decl-fun" id="min"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#min">min<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>min: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <span class="kw">if</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <a class="pp" href="#_lt__eq_">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(&lt;=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="kw">then</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="kw">else</span> </span><a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a>

<span class="comment">// The maximum of two instants.
</span><span class="decl-fun" id="max"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#max">max<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>max: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <span class="kw">if</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <a class="pp" href="#_gt__eq_">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="kw">then</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="kw">else</span> </span><a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a>

<span class="comment">// Add a duration to an instant in time.
// Note: this generally entails conversion to TAI time (&#96;ts-tai&#96;).
// See also &#96;add-duration-in&#96; and &#96;add-days&#96; to add
// in direct time scale units.
</span><span class="decl-fun" id="_plus_"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#_plus_">(+)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <span class="kw">if</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_unit">unit<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>unit: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><a class="pp" href="std_core_string-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">"TAI"<span class="pc">literal: <span class="tp">string</span><br>count= 3</span></a>
   <span class="kw">then</span> <a class="pp" href="#unsafe_add">unsafe-add<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>add: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tspan</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>, <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#timespan">timespan<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>timespan: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a> )
   <span class="kw">else</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#use_timescale">use-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp" href="#ts_tai">ts-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tai: <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="#unsafe_add">unsafe-add<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>add: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tspan</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#timespan">timespan<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>timespan: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a> )<span class="kw op">.</span><a class="pp" href="#use_timescale">use-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_timescale">timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a></span>)

<span class="comment">// Add &#96;days&#96; days to the instant.
</span><span class="decl-fun" id="add_days"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#add_days">add-days<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>add<span class="dash">-</span>days: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>,  <a class="pp">days<span class="pc">days: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp" href="#con_space_Instant"><span class="co">Instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>Instant: <span class="tp sp">(</span><span class="tp tpp">since</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_timestamp-source.html#add_days">add-days<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>add<span class="dash">-</span>days: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp">days<span class="pc">days: <span class="tp">int</span></span></a>), <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a></span>)


<span class="comment">/&#42; Add a duration of &#96;t&#96; seconds of time scale &#96;tscale&#96;.
This can for example be used to add Unix or NTP seconds where leap seconds
are ignored (allthough it is recommended in that case to use
&#96;:time&#96; and add logical days etc).
&#96;&#96;&#96;
&gt; instant(2005,12,31).add-duration-in( ts-unix, (24&#42;3600).timespan ).time
2006-01-01T00:00:00Z

&gt; (instant(2005,12,31) + 24.hours).time
2005-12-31T23:59:60Z
&#96;&#96;&#96;
&#42;/</span>
<span class="decl-fun" id="add_duration_in"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#add_duration_in">add-duration-in<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>add<span class="dash">-</span>duration<span class="dash">-</span>in: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>,  <a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>, <a class="pp">t<span class="pc">t: <span class="tp">timespan</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timespan"><span class="tp">timespan</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#use_timescale">use-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="#unsafe_add">unsafe-add<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>add: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tspan</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">timespan</span></span></a> </span>)

<span class="comment">// Add a time span to an instant in time.
// This is only safe if the time unit of the timespan is the
// same as that of the instant.
</span><span class="decl-fun" id="unsafe_add"><span class="kw">fun</span> <a class="pp" href="std_time_instant.html#unsafe_add">unsafe-add<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>add: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tspan</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">tspan<span class="pc">tspan: <span class="tp">timespan</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timespan"><span class="tp">timespan</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp" href="#con_space_Instant"><span class="co">Instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>Instant: <span class="tp sp">(</span><span class="tp tpp">since</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a> <a class="pp" href="std_time_timestamp-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a> <a class="pp">tspan<span class="pc">tspan: <span class="tp">timespan</span></span></a>, <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a> </span>) <span class="comment">// directly add
</span>
<span class="comment">// Subtract a duration from an instant in time.
</span><span class="decl-fun" id="duration_fs__dash_"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#duration_fs__dash_">duration/(-)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">duration<span class="fslash">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <a class="pp" href="#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a> (<a class="pp" href="std_time_duration-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a><a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a></span>)

<span class="comment">// Return the duration between to instants in time.
</span><span class="decl-fun" id="_dash_"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#_dash_">(-)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_duration">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>duration: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp" href="std_time_duration-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_duration">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>duration: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a></span>

<span class="comment">// Show an instant as a number of (TAI) SI seconds since the &#96;epoch&#96; in a given precision.
// This can be used as an unambigious time stamp.
</span><span class="decl-fun" id="instant_fs_show"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#instant_fs_show">instant/show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs<span class="dash">-</span>width</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">9<span class="pc">literal: <span class="tp">int</span><br>dec  = 9<br>hex8 = 0x09<br>bit8 = 0b00001001</span></a>, <a class="pp">secs-width<span class="pc">secs<span class="dash">-</span>width: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">1<span class="pc">literal: <span class="tp">int</span><br>dec  = 1<br>hex8 = 0x01<br>bit8 = 0b00000001</span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#use_timescale">use-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp" href="#ts_tai">ts-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tai: <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="#show_raw">show-raw<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>show<span class="dash">-</span>raw: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs<span class="dash">-</span>width</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">unit</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp">int</span></span></a>,<a class="pp">secs-width<span class="pc">secs<span class="dash">-</span>width: <span class="tp">int</span></span></a>,<a class="pp">"s"<span class="pc">literal: <span class="tp">string</span><br>count= 1</span></a></span>)

<span class="comment">// Internal: show an instant as a raw timestamp in a given precision, postfixed with the time scale name.
</span><span class="decl-fun" id="show_raw"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#show_raw">show-raw<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>show<span class="dash">-</span>raw: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs<span class="dash">-</span>width</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">unit</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">9<span class="pc">literal: <span class="tp">int</span><br>dec  = 9<br>hex8 = 0x09<br>bit8 = 0b00001001</span></a>, <a class="pp">secs-width<span class="pc">secs<span class="dash">-</span>width: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">1<span class="pc">literal: <span class="tp">int</span><br>dec  = 1<br>hex8 = 0x01<br>bit8 = 0b00000001</span></a>, <a class="pp">unit<span class="pc">unit: <span class="tp sp">?</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">""<span class="pc">literal: <span class="tp">string</span><br>count= 0</span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_timestamp-source.html#ts_show">ts-show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>ts<span class="dash">-</span>show: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs<span class="dash">-</span>width</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">unit</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp">int</span></span></a>,<a class="pp">secs-width<span class="pc">secs<span class="dash">-</span>width: <span class="tp">int</span></span></a>,<a class="pp">unit<span class="pc">unit: <span class="tp">string</span></span></a>)
   <a class="pp" href="std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<span class="kw">if</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_string-source.html#is_empty">is-empty<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string<span class="fslash last">/</span></span>is<span class="dash">-</span>empty: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core_types-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><a class="pp" href="std_core_string-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">"TAI"<span class="pc">literal: <span class="tp">string</span><br>count= 3</span></a> <span class="kw">then</span> <a class="pp">""<span class="pc">literal: <span class="tp">string</span><br>count= 0</span></a> <span class="kw">else</span> <a class="pp">" "<span class="pc">literal: <span class="tp">string</span><br>count= 1</span></a> <a class="pp" href="std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_ts">ts<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>ts: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a></span>)

<span class="comment">/&#42;----------------------------------------------------------------------------
  Time scales
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">// Our epoch is set at 2000-01-01 TAI (which is equal to 1999-12-31T23:59:28Z UTC).
//
// Another candidate epoch could have been the standard [J2000] epoch ([&#96;epoch-j2000&#96;](std&#95;time&#95;astro.html#epoch&#95;j2000)),
// which equals 2000-01-01T12:00:00 TT (terrestrial time).
// However, that would mean that for the most common time scales, namely UTC and TAI, there would always be a
// fractional offset (of 32.184s) for common time stamps. Moreover, by having an epoch at noon there would be
// an extra correction needed for calendar date calculations too.
//
// Similarly, the standard Unix epoch of 1970-01-01Z UTC is not ideal either since the UTC offset with TAI
// was fractional at that time (namely 8.000082s).
//
// Finally, after 1996, TAI was corrected for black-body radiation [@blackbody] which makes
// the 2000-01-01 epoch a very precisely defined point in time.
//
//
// [J2000]: https://en.wikipedia.org/wiki/Equinox&#95;(celestial&#95;coordinates)#J2000.0
</span><span class="decl-val" id="epoch"><span class="kw">pub</span> <span class="kw">val</span> <a class="pp" href="std_time_instant.html#epoch">epoch<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>epoch: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#duration_fs_instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">duration<span class="fslash">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp" href="std_time_duration-source.html#duration0">duration0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration0: <span class="tp">duration</span></span></a></span>)

<span class="comment">// Create a new time scale based on SI seconds (as measured on the Earth's geoid) with a given
//  &#96;name&#96;, a fixed &#96;offset&#96; (=&#96;duration0&#96;) from TAI (e.g. GPS = TAI - 19), and
// a &#96;epoch-y2k&#96; (= &#96;timestamp0&#96;) which is the timestamp of the 2000-01-01 date in that timescale
// e.g. for a timescale &#96;ts&#96;:\
// &#96;epoch-y2k = instant(2000,1,1,cal=iso-calendar(ts)).since-in(ts)&#96;
</span><span class="decl-fun" id="tai_timescale"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#tai_timescale">tai-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>tai<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">offset</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>( <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">offset<span class="pc">offset: <span class="tp sp">?</span> <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">0<span class="pc">literal: <span class="tp">int</span><br>dec  = 0<br>hex8 = 0x00<br>bit8 = 0b00000000</span></a><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#int_fs_duration">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span><span class="lq">int<span class="fslash">/</span></span>duration: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>
  <span class="kw">val</span> <a class="pp">epoch-shift<span class="pc">epoch<span class="dash">-</span>shift: <span class="tp">timespan</span></span></a> <span class="kw">=</span> <a class="pp">offset<span class="pc">offset: <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#timespan">timespan<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>timespan: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a>
  <span class="decl-fun" id="from_tai"><span class="kw">fun</span> <a class="pp">from-tai<span class="pc">from<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp tpp">tai</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp">tai<span class="pc">tai: <span class="tp">duration</span></span></a><span class="tp kw op">:</span><a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">timestamp</span></span></a> { (<a class="pp">tai<span class="pc">tai: <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#timespan">timespan<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>timespan: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a> <a class="pp" href="std_num_ddouble-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp">epoch-shift<span class="pc">epoch<span class="dash">-</span>shift: <span class="tp">timespan</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_time_timestamp-source.html#timestamp">timestamp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">,</span> <span class="tp tpp">leap</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>  </span>}
  <span class="decl-fun" id="to_tai"><span class="kw">fun</span> <a class="pp">to-tai<span class="pc">to<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a><span class="tp kw op">:</span><a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">duration</span></span></a>    { (<a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a> <a class="pp" href="std_time_timestamp-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a> <a class="pp">epoch-shift<span class="pc">epoch<span class="dash">-</span>shift: <span class="tp">timespan</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#unsafe_duration">unsafe-duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>duration: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> </span>}
  <a class="pp" href="#timescale">timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">from<span class="dash">-</span>tai</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">to<span class="dash">-</span>tai</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">unit</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">seconds<span class="dash">-</span>in<span class="dash">-</span>day</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp sp">(</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span><span class="tp sp">&gt;</span><span class="tp sp">)</span><span class="tp sp">,</span> <span class="tp tpp">to<span class="dash">-</span>mjd2000</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp sp">(</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span><span class="tp sp">&gt;</span><span class="tp sp">)</span><span class="tp sp">,</span> <span class="tp tpp">from<span class="dash">-</span>mjd2000</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp sp">(</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span><span class="tp sp">&gt;</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>(
    <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a>,
    <a class="pp">from-tai<span class="pc">from<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp tpp">tai</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>,
    <a class="pp">to-tai<span class="pc">to<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>,
    <a class="pp">"TAI"<span class="pc">literal: <span class="tp">string</span><br>count= 3</span></a>
  </span>)

<span class="comment">// Create a new time scale given &#96;name&#96;, two inverse function &#96;from-tai&#96; and &#96;to-tai&#96;,
// and an optional function that returns the seconds in the day of the instant.
// The time unit defaults to &#96;name&#96;.
</span><span class="decl-fun" id="timescale"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#timescale">timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">from<span class="dash">-</span>tai</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">to<span class="dash">-</span>tai</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">unit</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">seconds<span class="dash">-</span>in<span class="dash">-</span>day</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp sp">(</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span><span class="tp sp">&gt;</span><span class="tp sp">)</span><span class="tp sp">,</span> <span class="tp tpp">to<span class="dash">-</span>mjd2000</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp sp">(</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span><span class="tp sp">&gt;</span><span class="tp sp">)</span><span class="tp sp">,</span> <span class="tp tpp">from<span class="dash">-</span>mjd2000</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp sp">(</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span><span class="tp sp">&gt;</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>( <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>,
                      <a class="pp">from-tai<span class="pc">from<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a>,
                      <a class="pp">to-tai<span class="pc">to<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>   <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a>,
                      <a class="pp">unit<span class="pc">unit: <span class="tp sp">?</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a>,
                      <a class="pp">seconds-in-day<span class="pc">seconds<span class="dash">-</span>in<span class="dash">-</span>day: <span class="tp sp">?</span> <span class="tp sp">(</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span><span class="tp sp">&gt;</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_time_timestamp-source.html#type_space_timespan"><span class="tp">timespan</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="kw">=</span> <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>,
                      <a class="pp">to-mjd2000<span class="pc">to<span class="dash">-</span>mjd2000: <span class="tp sp">?</span> <span class="tp sp">(</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span><span class="tp sp">&gt;</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span><span class="tp kw op">:</span><a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a><span class="tp sp">,</span><span class="tp tpp">tzdelta</span><span class="tp kw op">:</span><a class="pp" href="std_time_timestamp-source.html#type_space_timespan"><span class="tp">timespan</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="co">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="kw">=</span> <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>,
                      <a class="pp">from-mjd2000<span class="pc">from<span class="dash">-</span>mjd2000: <span class="tp sp">?</span> <span class="tp sp">(</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span><span class="tp sp">&gt;</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">days</span><span class="tp kw op">:</span><a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a><span class="tp sp">,</span><span class="tp tpp">frac</span><span class="tp kw op">:</span><a class="pp" href="std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="co">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="kw">=</span> <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
                    <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>
  <span class="co">Timescale</span>(
    <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a>,
    <a class="pp">unit<span class="pc">unit: <span class="tp">string</span></span></a>,
    <a class="pp">from-tai<span class="pc">from<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>,
    <a class="pp">to-tai<span class="pc">to<span class="dash">-</span>tai: <span class="tp sp">(</span><span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>,
    <a class="pp">seconds-in-day<span class="pc">seconds<span class="dash">-</span>in<span class="dash">-</span>day: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span><span class="tp sp">&gt;</span></span></a>,
    <a class="pp">to-mjd2000<span class="pc">to<span class="dash">-</span>mjd2000: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span><span class="tp sp">&gt;</span></span></a>,
    <a class="pp">from-mjd2000<span class="pc">from<span class="dash">-</span>mjd2000: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span><span class="tp sp">&gt;</span></span></a>
  </span>)


<span class="comment">// The [TAI](https://en.wikipedia.org/wiki/International&#95;Atomic&#95;Time) (International atomic time)
// time scale is based on SI seconds measured on the Earth's geoid, with a 2000-01-01 TAI &#96;epoch&#96;.
</span><span class="decl-val" id="ts_tai"><span class="kw">pub</span> <span class="kw">val</span> <a class="pp" href="std_time_instant.html#ts_tai">ts-tai<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tai: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#tai_timescale">tai-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>tai<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">offset</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>( <a class="pp">"TAI"<span class="pc">literal: <span class="tp">string</span><br>count= 3</span></a> </span>)

<span class="comment">// The [GPS](https://en.wikipedia.org/wiki/Global&#95;Positioning&#95;System#Timekeeping) time scale based
// on SI seconds with a 1980-01-06 GPS epoch.\
// GPS = TAI - 19s.
</span><span class="decl-val" id="ts_gps"><span class="kw">pub</span> <span class="kw">val</span> <a class="pp" href="std_time_instant.html#ts_gps">ts-gps<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>gps: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#tai_timescale">tai-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>tai<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">offset</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>( <a class="pp">"GPS"<span class="pc">literal: <span class="tp">string</span><br>count= 3</span></a>, <a class="pp">-19<span class="pc">literal: <span class="tp">int</span><br>dec  = -19<br>hex8 = 0xED<br>bit8 = 0b11101101</span></a><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#int_fs_duration">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span><span class="lq">int<span class="fslash">/</span></span>duration: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a></span>)

<span class="decl-val" id="gps2000"><span class="kw">val</span> <a class="pp" href="std_time_instant.html#gps2000">gps2000<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>gps2000: <span class="tp">duration</span></span></a>  <span class="kw">=</span> <a class="pp" href="std_time_duration-source.html#int_fs_duration">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span><span class="lq">int<span class="fslash">/</span></span>duration: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>(<a class="pp">630720000<span class="pc">literal: <span class="tp">int</span><br>dec  = 630720000<br>hex32= 0x25980600<br>bit32= 0b00100101100110000000011000000000</span></a></span>)

<span class="comment">// Get the GPS time in SI seconds since the GPS epoch (1980-01-06Z)
</span><span class="decl-fun" id="gps_timestamp"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#gps_timestamp">gps-timestamp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>gps<span class="dash">-</span>timestamp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#timestamp_in">timestamp-in<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timestamp<span class="dash">-</span>in: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp" href="#ts_gps">ts-gps<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>gps: <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#unsafe_duration">unsafe-duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>duration: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp" href="std_time_duration-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp" href="#gps2000">gps2000<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>gps2000: <span class="tp">duration</span></span></a></span>

<span class="comment">// Create an instant from a raw GPS time since the GPS epoch (1980-01-06Z)
</span><span class="decl-fun" id="duration_fs_gps_instant"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#duration_fs_gps_instant">duration/gps-instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">duration<span class="fslash">/</span></span>gps<span class="dash">-</span>instant: <span class="tp sp">(</span><span class="tp tpp">gps</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">gps<span class="pc">gps: <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp" href="#duration_fs_instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">duration<span class="fslash">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">gps<span class="pc">gps: <span class="tp">duration</span></span></a> <a class="pp" href="std_time_duration-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp" href="#gps2000">gps2000<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>gps2000: <span class="tp">duration</span></span></a>  </span>)


<span class="comment">// Get the GPS time as weeks and SI seconds in the week since the GPS epoch (1980-01-06Z)
</span><span class="decl-fun" id="gps_week_timestamp"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#gps_week_timestamp">gps-week-timestamp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>gps<span class="dash">-</span>week<span class="dash">-</span>timestamp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">duration</span><span class="tp sp">)</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">duration</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_tuple2"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>tuple2: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a><span class="tp sp">)</span>
  <span class="kw">val</span> <a class="pp">t<span class="pc">t: <span class="tp">duration</span></span></a> <span class="kw">=</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#gps_timestamp">gps-timestamp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>gps<span class="dash">-</span>timestamp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>
  <span class="kw">val</span> <a class="pp">w<span class="pc">w: <span class="tp">int</span></span></a> <span class="kw">=</span> (<a class="pp">t<span class="pc">t: <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#timespan">timespan<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>timespan: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a> <a class="pp" href="std_num_ddouble-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp">25200<span class="pc">literal: <span class="tp">int</span><br>dec  = 25200<br>hex16= 0x6270<br>bit16= 0b0110001001110000</span></a><span class="kw op">.</span><a class="pp" href="std_num_ddouble-source.html#int_fs_ddouble">ddouble<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span><span class="lq">int<span class="fslash">/</span></span>ddouble: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_num_ddouble-source.html#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a><span class="kw op">.</span><a class="pp" href="std_num_ddouble-source.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">nonfin</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">val</span> <a class="pp">s<span class="pc">s: <span class="tp">duration</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">duration</span></span></a> <a class="pp" href="std_time_duration-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> (<a class="pp">w<span class="pc">w: <span class="tp">int</span></span></a><a class="pp" href="std_core_int-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>int<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">25200<span class="pc">literal: <span class="tp">int</span><br>dec  = 25200<br>hex16= 0x6270<br>bit16= 0b0110001001110000</span></a>)<span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#int_fs_duration">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span><span class="lq">int<span class="fslash">/</span></span>duration: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>
  <a class="pp" href="std_core_types-source.html#con_space_Tuple2"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Tuple2: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">w<span class="pc">w: <span class="tp">int</span></span></a>, <a class="pp">s<span class="pc">s: <span class="tp">duration</span></span></a></span><a class="pp" href="std_core_types-source.html#con_space_Tuple2"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Tuple2: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>

<span class="comment">// Create an instant from a GPS time in weeks and SI seconds since the GPS epoch (1980-01-06Z)
</span><span class="decl-fun" id="date_fs_gps_instant"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#date_fs_gps_instant">date/gps-instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">date<span class="fslash">/</span></span>gps<span class="dash">-</span>instant: <span class="tp sp">(</span><span class="tp tpp">weeks</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">weeks<span class="pc">weeks: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>, <a class="pp">secs<span class="pc">secs: <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp" href="#duration_fs_gps_instant">gps-instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">duration<span class="fslash">/</span></span>gps<span class="dash">-</span>instant: <span class="tp sp">(</span><span class="tp tpp">gps</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( (<a class="pp">weeks<span class="pc">weeks: <span class="tp">int</span></span></a> <a class="pp" href="std_core_int-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>int<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">25200<span class="pc">literal: <span class="tp">int</span><br>dec  = 25200<br>hex16= 0x6270<br>bit16= 0b0110001001110000</span></a>)<span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#int_fs_duration">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span><span class="lq">int<span class="fslash">/</span></span>duration: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp" href="std_time_duration-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp">secs<span class="pc">secs: <span class="tp">duration</span></span></a> </span>)

<span class="comment">// The [TT](https://en.wikipedia.org/wiki/Terrestrial&#95;Time) (Terrestrial time)
// time scale is based on SI seconds with a 1977-01-01 TAI &#96;epoch&#96;. It is the
// continuation of TDT (Terrestrial dynamic time) and ET (Ephemeris time). TT
// is defined as: TT = TAI + 32.184s.
</span><span class="decl-val" id="ts_tt"><span class="kw">pub</span> <span class="kw">val</span> <a class="pp" href="std_time_instant.html#ts_tt">ts-tt<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tt: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#tai_timescale">tai-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>tai<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">offset</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>( <a class="pp">"TT"<span class="pc">literal: <span class="tp">string</span><br>count= 2</span></a>, <a class="pp" href="std_time_duration-source.html#float64_fs_duration">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span><span class="lq">float64<span class="fslash">/</span></span>duration: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>(<a class="pp">32.184<span class="pc">literal: <span class="tp">float64</span><br>hex64= 0x1.0178d4fdf3b64p5</span></a>)</span>)

<span class="decl-val" id="tt2000"><span class="kw">val</span> <a class="pp" href="std_time_instant.html#tt2000">tt2000<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>tt2000: <span class="tp">duration</span></span></a> <span class="kw">=</span> <a class="pp" href="std_time_duration-source.html#int_fs_duration">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span><span class="lq">int<span class="fslash">/</span></span>duration: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>(<a class="pp">630720000<span class="pc">literal: <span class="tp">int</span><br>dec  = 630720000<br>hex32= 0x25980600<br>bit32= 0b00100101100110000000011000000000</span></a></span>)

<span class="comment">// Get the TT time in SI seconds since the TT epoch (1977-01-01 TAI)
</span><span class="decl-fun" id="instant_fs_tt_instant"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#instant_fs_tt_instant">instant/tt-instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>tt<span class="dash">-</span>instant: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#timestamp_in">timestamp-in<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timestamp<span class="dash">-</span>in: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp" href="#ts_tt">ts-tt<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>ts<span class="dash">-</span>tt: <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#unsafe_duration">unsafe-duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>duration: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp" href="std_time_duration-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp" href="#tt2000">tt2000<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>tt2000: <span class="tp">duration</span></span></a></span>

<span class="comment">// Create an instant from a raw TT time since the TT epoch (1977-01-01 TAI)
</span><span class="decl-fun" id="duration_fs_tt_instant"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#duration_fs_tt_instant">duration/tt-instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">duration<span class="fslash">/</span></span>tt<span class="dash">-</span>instant: <span class="tp sp">(</span><span class="tp tpp">tt</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">tt<span class="pc">tt: <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a>
  <a class="pp" href="#duration_fs_instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">duration<span class="fslash">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">tt<span class="pc">tt: <span class="tp">duration</span></span></a> <a class="pp" href="std_time_duration-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp" href="#tt2000">tt2000<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>tt2000: <span class="tp">duration</span></span></a> </span>)


<span class="comment">// Show a timestamp with an optional maximum precision (&#96;max-prec&#96; (=&#96;9&#96;)) and
// minimum width for the seconds (=&#96;1&#96;).
</span><span class="decl-fun" id="timestamp_fs_show"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#timestamp_fs_show">timestamp/show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timestamp<span class="fslash">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs<span class="dash">-</span>width</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">unit</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timestamp"><span class="tp">timestamp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timestamp: <span class="co">V</span></span></a>, <a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">9<span class="pc">literal: <span class="tp">int</span><br>dec  = 9<br>hex8 = 0x09<br>bit8 = 0b00001001</span></a>, <a class="pp">secs-width<span class="pc">secs<span class="dash">-</span>width: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">1<span class="pc">literal: <span class="tp">int</span><br>dec  = 1<br>hex8 = 0x01<br>bit8 = 0b00000001</span></a>, <a class="pp">unit<span class="pc">unit: <span class="tp sp">?</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">""<span class="pc">literal: <span class="tp">string</span><br>count= 0</span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  <a class="pp">t<span class="pc">t: <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_timestamp-source.html#ts_show">ts-show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>ts<span class="dash">-</span>show: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs<span class="dash">-</span>width</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">unit</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp">int</span></span></a>,<a class="pp">secs-width<span class="pc">secs<span class="dash">-</span>width: <span class="tp">int</span></span></a>,<a class="pp">unit<span class="pc">unit: <span class="tp">string</span></span></a></span>)


<span class="comment">/&#42;----------------------------------------------------------------------------
  Julian Date
----------------------------------------------------------------------------&#42;/</span>
<span class="decl-val" id="jd_epoch_delta"><span class="kw">val</span> <a class="pp" href="std_time_instant.html#jd_epoch_delta">jd-epoch-delta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>jd<span class="dash">-</span>epoch<span class="dash">-</span>delta: <span class="tp">timespan</span></span></a>  <span class="kw">=</span> <a class="pp" href="std_time_timestamp-source.html#float64_fs_timespan">timespan<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span><span class="lq">float64<span class="fslash">/</span></span>timespan: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a>(<a class="pp">2400000.5<span class="pc">literal: <span class="tp">float64</span><br>hex64= 0x1.24f804p21</span></a></span>)   <span class="comment">// relative to the MJD epoch
</span><span class="decl-val" id="mjd_epoch_delta"><span class="kw">val</span> <a class="pp" href="std_time_instant.html#mjd_epoch_delta">mjd-epoch-delta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>mjd<span class="dash">-</span>epoch<span class="dash">-</span>delta: <span class="tp">timespan</span></span></a> <span class="kw">=</span> <a class="pp" href="std_time_timestamp-source.html#int_fs_timespan">timespan<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span><span class="lq">int<span class="fslash">/</span></span>timespan: <span class="tp sp">(</span><span class="tp tpp">seconds</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a>(<a class="pp">51544<span class="pc">literal: <span class="tp">int</span><br>dec  = 51544<br>hex32= 0x0000C958<br>bit32= 0b00000000000000001100100101011000</span></a></span>)       <span class="comment">// relative to our epoch (2000-01-01)
</span>
<span class="comment">// Create an instant given a [julian day](https://en.wikipedia.org/wiki/Julian&#95;day).
</span><span class="decl-fun" id="float64_fs_instant_at_jd"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#float64_fs_instant_at_jd">float64/instant-at-jd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">float64<span class="fslash">/</span></span>instant<span class="dash">-</span>at<span class="dash">-</span>jd: <span class="tp sp">(</span><span class="tp tpp">jd</span> <span class="tp kw op">:</span> <span class="tp">float64</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">jd<span class="pc">jd: <span class="tp">float64</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_float64"><span class="tp">float64</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>float64: <span class="co">V</span></span></a>, <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp" href="#ddouble_fs_instant_at_jd">instant-at-jd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">ddouble<span class="fslash">/</span></span>instant<span class="dash">-</span>at<span class="dash">-</span>jd: <span class="tp sp">(</span><span class="tp tpp">jd</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp" href="std_num_ddouble-source.html#float64_fs_ddouble">ddouble<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span><span class="lq">float64<span class="fslash">/</span></span>ddouble: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>(<a class="pp">jd<span class="pc">jd: <span class="tp">float64</span></span></a>),<a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a></span>)

<span class="comment">// Create an instant given a [julian day](https://en.wikipedia.org/wiki/Julian&#95;day)
// and time scale &#96;ts&#96; .
</span><span class="decl-fun" id="ddouble_fs_instant_at_jd"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#ddouble_fs_instant_at_jd">ddouble/instant-at-jd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">ddouble<span class="fslash">/</span></span>instant<span class="dash">-</span>at<span class="dash">-</span>jd: <span class="tp sp">(</span><span class="tp tpp">jd</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">jd<span class="pc">jd: <span class="tp">ddouble</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="co">V</span></span></a>, <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>  <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp" href="#ddouble_fs_instant_at_mjd">instant-at-mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">ddouble<span class="fslash">/</span></span>instant<span class="dash">-</span>at<span class="dash">-</span>mjd: <span class="tp sp">(</span><span class="tp tpp">mjd</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">jd<span class="pc">jd: <span class="tp">ddouble</span></span></a> <a class="pp" href="std_num_ddouble-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp" href="#jd_epoch_delta">jd-epoch-delta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>jd<span class="dash">-</span>epoch<span class="dash">-</span>delta: <span class="tp">timespan</span></span></a>, <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> </span>)

<span class="comment">// Create an instant given a [modified julian day](https://en.wikipedia.org/wiki/Julian&#95;day).
// and time scale &#96;ts&#96;.\
// &#96;modified-julian-day = julian-day - 2400000.5&#96;
</span><span class="decl-fun" id="float64_fs_instant_at_mjd"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#float64_fs_instant_at_mjd">float64/instant-at-mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">float64<span class="fslash">/</span></span>instant<span class="dash">-</span>at<span class="dash">-</span>mjd: <span class="tp sp">(</span><span class="tp tpp">mjd</span> <span class="tp kw op">:</span> <span class="tp">float64</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">mjd<span class="pc">mjd: <span class="tp">float64</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_float64"><span class="tp">float64</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>float64: <span class="co">V</span></span></a>, <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <a class="pp" href="#ddouble_fs_instant_at_mjd">instant-at-mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">ddouble<span class="fslash">/</span></span>instant<span class="dash">-</span>at<span class="dash">-</span>mjd: <span class="tp sp">(</span><span class="tp tpp">mjd</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp" href="std_num_ddouble-source.html#float64_fs_ddouble">ddouble<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span><span class="lq">float64<span class="fslash">/</span></span>ddouble: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">float64</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>(<a class="pp">mjd<span class="pc">mjd: <span class="tp">float64</span></span></a>),<a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a></span>)

<span class="comment">// Create an instant given a [modified julian day](https://en.wikipedia.org/wiki/Julian&#95;day).
// and time scale &#96;ts&#96;.\
// &#96;modified-julian-day = julian-day - 2400000.5&#96;
</span><span class="decl-fun" id="ddouble_fs_instant_at_mjd"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#ddouble_fs_instant_at_mjd">ddouble/instant-at-mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">ddouble<span class="fslash">/</span></span>instant<span class="dash">-</span>at<span class="dash">-</span>mjd: <span class="tp sp">(</span><span class="tp tpp">mjd</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">mjd<span class="pc">mjd: <span class="tp">ddouble</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="co">V</span></span></a>, <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>  <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>
  <span class="kw">val</span> <a class="pp">d<span class="pc">d: <span class="tp">ddouble</span></span></a>     <span class="kw">=</span> <a class="pp">mjd<span class="pc">mjd: <span class="tp">ddouble</span></span></a> <a class="pp" href="std_num_ddouble-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp" href="#mjd_epoch_delta">mjd-epoch-delta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>mjd<span class="dash">-</span>epoch<span class="dash">-</span>delta: <span class="tp">timespan</span></span></a> <span class="comment">// since 2000-01-01
</span>  <span class="kw">val</span> <a class="pp">days<span class="pc">days: <span class="tp">ddouble</span></span></a>  <span class="kw">=</span> <a class="pp">d<span class="pc">d: <span class="tp">ddouble</span></span></a><span class="kw op">.</span><a class="pp" href="std_num_ddouble-source.html#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>
  <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">ddouble</span></span></a>  <span class="kw">=</span> <a class="pp">d<span class="pc">d: <span class="tp">ddouble</span></span></a> <a class="pp" href="std_num_ddouble-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp">days<span class="pc">days: <span class="tp">ddouble</span></span></a>
  <span class="kw">val</span> <a class="pp">idays<span class="pc">idays: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">days<span class="pc">days: <span class="tp">ddouble</span></span></a><span class="kw op">.</span><a class="pp" href="std_num_ddouble-source.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">nonfin</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">match</span> <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_mb_from_mjd2000">mb-from-mjd2000<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>mb<span class="dash">-</span>from<span class="dash">-</span>mjd2000: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span><span class="tp sp">&gt;</span></span></a>
    <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>            <span class="kw op">-></span> <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#date_fs_instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">date<span class="fslash">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">,</span> <span class="tp tpp">leap</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">idays<span class="pc">idays: <span class="tp">int</span></span></a>, <a class="pp">frac<span class="pc">frac: <span class="tp">ddouble</span></span></a><a class="pp" href="std_num_ddouble-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a><a class="pp" href="std_time_timestamp-source.html#solar_secs_per_day">solar-secs-per-day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>solar<span class="dash">-</span>secs<span class="dash">-</span>per<span class="dash">-</span>day: <span class="tp">timespan</span></span></a> )
    <a class="pp" href="std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">from-mjd2000<span class="pc">from<span class="dash">-</span>mjd2000: <span class="tp sp">(</span><span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>) <span class="kw op">-></span> <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>( <a class="pp">from-mjd2000<span class="pc">from<span class="dash">-</span>mjd2000: <span class="tp sp">(</span><span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>(<a class="pp">idays<span class="pc">idays: <span class="tp">int</span></span></a>,<a class="pp">frac<span class="pc">frac: <span class="tp">ddouble</span></span></a>) </span>)


<span class="comment">/&#42; Return the julian day in a given time scale &#96;ts&#96; for an instant &#96;i&#96;.
Properly takes leap seconds into account when calculating the fraction of the day
in a UTC calendar. For example:
&#96;&#96;&#96;&#96;
&gt; time(2014,12,31,23,59,59).jd
2457023.499988425925926

&gt; time(2015,12,31,23,59,59).jd
2457388.499988425925926

&gt; time(2016,12,31,23,59,59).jd
2457754.499976852119767

&gt; time(2016,12,31,23,59,60).jd
2457754.499988426059884
&#96;&#96;&#96;&#96;
.
&#42;/</span>
<span class="decl-fun" id="jd"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#jd">jd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>jd: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">ddouble</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="co">V</span></span></a>
  <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#mjd">mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>mjd: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>(<a class="pp">ts<span class="pc">ts: <span class="tp">timescale</span></span></a>) <a class="pp" href="std_num_ddouble-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp" href="#jd_epoch_delta">jd-epoch-delta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>jd<span class="dash">-</span>epoch<span class="dash">-</span>delta: <span class="tp">timespan</span></span></a></span>


<span class="comment">// Return the modified julian day in a given time scale &#96;ts&#96; for an instant &#96;i&#96;.
// Can also pass an optional &#96;delta&#96; (=&#96;timespan0&#96;) that is added to the raw timestamp of &#96;i&#96;
// before conversion (used in &#96;std/time/time&#96; to take timezones into account)
</span><span class="decl-fun" id="mjd"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_time_instant.html#mjd">mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>mjd: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="co">V</span></span></a>, <a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timescale"><span class="tp">timescale</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>timescale: <span class="co">V</span></span></a>, <a class="pp">tzdelta<span class="pc">tzdelta: <span class="tp sp">?</span> <span class="tp">timespan</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_timestamp-source.html#type_space_timespan"><span class="tp">timespan</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_time_timestamp-source.html#timespan0">timespan0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan0: <span class="tp">timespan</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">ddouble</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="co">V</span></span></a>
  <span class="kw">val</span> <a class="pp">i0<span class="pc">i0: <span class="tp">instant</span></span></a> <span class="kw">=</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#use_timescale">use-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a>)
  <span class="kw">val</span> <a class="pp">mjd<span class="pc">mjd: <span class="tp">ddouble</span></span></a> <span class="kw">=</span> <span class="kw">match</span> <a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="#timescale_fs_mb_to_mjd2000">mb-to-mjd2000<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">timescale<span class="fslash">/</span></span>mb<span class="dash">-</span>to<span class="dash">-</span>mjd2000: <span class="tp sp">(</span><span class="tp tpp">timescale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span><span class="tp sp">&gt;</span></span></a>
              <a class="pp" href="std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span>
                <span class="kw">val</span> <a class="pp">i1<span class="pc">i1: <span class="tp">instant</span></span></a>   <span class="kw">=</span> <a class="pp">i0<span class="pc">i0: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#add_duration_in">add-duration-in<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>add<span class="dash">-</span>duration<span class="dash">-</span>in: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">tscale<span class="pc">tscale: <span class="tp">timescale</span></span></a>,<a class="pp">tzdelta<span class="pc">tzdelta: <span class="tp">timespan</span></span></a>)
                <span class="kw">val</span> <a class="pp">days<span class="pc">days: <span class="tp">ddouble</span></span></a> <span class="kw">=</span> <a class="pp">i1<span class="pc">i1: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#days">days<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>days: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_num_ddouble-source.html#int_fs_ddouble">ddouble<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span><span class="lq">int<span class="fslash">/</span></span>ddouble: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>
                <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">ddouble</span></span></a> <span class="kw">=</span> <a class="pp">i1<span class="pc">i1: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_timestamp-source.html#seconds_into_day">seconds-into-day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>seconds<span class="dash">-</span>into<span class="dash">-</span>day: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp" href="std_num_ddouble-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp" href="std_time_timestamp-source.html#solar_secs_per_day">solar-secs-per-day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>solar<span class="dash">-</span>secs<span class="dash">-</span>per<span class="dash">-</span>day: <span class="tp">timespan</span></span></a>
                (<a class="pp">days<span class="pc">days: <span class="tp">ddouble</span></span></a> <a class="pp" href="std_num_ddouble-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp">frac<span class="pc">frac: <span class="tp">ddouble</span></span></a>)

              <a class="pp" href="std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">to-mjd<span class="pc">to<span class="dash">-</span>mjd: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>) <span class="kw op">-></span>
                <a class="pp">to-mjd<span class="pc">to<span class="dash">-</span>mjd: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">timestamp</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>( <a class="pp">i0<span class="pc">i0: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#instant_fs_since">since<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span><span class="lq">instant<span class="fslash">/</span></span>since: <span class="tp sp">(</span><span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timestamp</span></span></a>, <a class="pp">tzdelta<span class="pc">tzdelta: <span class="tp">timespan</span></span></a> )
  (<a class="pp">mjd<span class="pc">mjd: <span class="tp">ddouble</span></span></a> <a class="pp" href="std_num_ddouble-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp" href="#mjd_epoch_delta">mjd-epoch-delta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>mjd<span class="dash">-</span>epoch<span class="dash">-</span>delta: <span class="tp">timespan</span></span></a></span>)

</pre>

</body>
</html>
