<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=1.0" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>dir.kk documentation</title>
</head>

<body class="koka doc body madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2020-2021, Microsoft Research, Daan Leijen.

  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the LICENSE file at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Directory operations.
&#42;/</span>
<span class="kw">module</span> <a class="pp" href="std_os_dir.html#_null_"><span class="mo">std/os/dir</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir</span></span></a>

<span class="kw">import</span> <a class="pp" href="std_os_path.html#_null_"><span class="mo">std/os/path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path</span></span></a>

<span class="kw">extern</span> <span class="kw">import</span>
  c file <span class="st">"dir-inline.c"</span>

<span class="comment">// Recursively list all the entries under a directory.
</span><span class="decl-fun" id="list_directory_recursive"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_os_dir.html#list_directory_recursive">list-directory-recursive<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>list<span class="dash">-</span>directory<span class="dash">-</span>recursive: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>depth</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a>, <a class="pp">max-depth<span class="pc">max<span class="dash">-</span>depth: <span class="tp sp">?</span> <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">1000<span class="pc">literal: <span class="tp">int</span><br>dec  = 1000<br>hex16= 0x03E8<br>bit16= 0b0000001111101000</span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_total"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a><a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core_types-source.html#type_space_div"><span class="tp"><span class="effect">div</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="co">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="kw">if</span> <a class="pp">max-depth<span class="pc">max<span class="dash">-</span>depth: <span class="tp">int</span></span></a> <a class="pp" href="std_core_int-source.html#_lt_">&lt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>int<span class="fslash last">/</span></span>(&lt;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">bool</span></span></a> <a class="pp">0<span class="pc">literal: <span class="tp">int</span><br>dec  = 0<br>hex8 = 0x00<br>bit8 = 0b00000000</span></a> <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
  <span class="kw">val</span> <a class="pp">all<span class="pc">all: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>  <span class="kw">=</span> <a class="pp" href="#list_directory">list-directory<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>list<span class="dash">-</span>directory: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a>)
  <span class="kw">val</span> <a class="pp">dirs<span class="pc">dirs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">all<span class="pc">all: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_list-source.html#filter">filter<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>list<span class="fslash last">/</span></span>filter: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#is_directory">is-directory<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>is<span class="dash">-</span>directory: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp">bool</span></span></a>)
  <a class="pp">all<span class="pc">all: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_core_list-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>list<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">ys</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a> <a class="pp">dirs<span class="pc">dirs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_list-source.html#flatmap">flatmap<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>list<span class="fslash last">/</span></span>flatmap: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>(<a class="pp"><span class="kw">fn</span><span class="pc">fn: <span class="tp sp">(</span><span class="tp tpp">sub</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">sub<span class="pc">sub: <span class="tp">path</span></span></a>){ <a class="pp" href="#list_directory_recursive">list-directory-recursive<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>list<span class="dash">-</span>directory<span class="dash">-</span>recursive: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>depth</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">sub<span class="pc">sub: <span class="tp">path</span></span></a>,(<a class="pp">max-depth<span class="pc">max<span class="dash">-</span>depth: <span class="tp">int</span></span></a> <a class="pp" href="std_core_int-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>int<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">int</span></span></a> <a class="pp">1<span class="pc">literal: <span class="tp">int</span><br>dec  = 1<br>hex8 = 0x01<br>bit8 = 0b00000001</span></a>)) }</span>)

<span class="decl-fun" id="copy_directory"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_os_dir.html#copy_directory">copy-directory<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>copy<span class="dash">-</span>directory: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">pure</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a>, <a class="pp">to<span class="pc">to: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">pure</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_total"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a><a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core-source.html#type_space_pure"><span class="tp"><span class="effect">pure</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pure: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  <a class="pp" href="#ensure_dir">ensure-dir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>ensure<span class="dash">-</span>dir: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">to<span class="pc">to: <span class="tp">path</span></span></a>)
  <span class="kw">val</span> <a class="pp">all<span class="pc">all: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp" href="#list_directory">list-directory<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>list<span class="dash">-</span>directory: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a>)
  <span class="kw">val</span> <a class="pp" href="std_core_types-source.html#con_space_Tuple2"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Tuple2: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">dirs<span class="pc">dirs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">files<span class="pc">files: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core_types-source.html#con_space_Tuple2"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Tuple2: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp">all<span class="pc">all: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_list-source.html#partition">partition<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>list<span class="fslash last">/</span></span>partition: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">&gt;</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span><span class="tp sp">)</span></span></a>(<a class="pp" href="#is_directory">is-directory<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>is<span class="dash">-</span>directory: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">&gt;</span> <span class="tp">bool</span></span></a>)
  <a class="pp">files<span class="pc">files: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_list-source.html#foreach">foreach<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>list<span class="fslash last">/</span></span>foreach: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp"><span class="kw">fn</span><span class="pc">fn: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">f<span class="pc">f: <span class="tp">path</span></span></a>){ <a class="pp" href="#copy_file">copy-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>copy<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">from</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">preserve<span class="dash">-</span>mtime</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">path</span></span></a>, <a class="pp">to<span class="pc">to: <span class="tp">path</span></span></a> <a class="pp" href="std_os_path-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">p1</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">p2</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp">path</span></span></a> <a class="pp">f<span class="pc">f: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#nodir">nodir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>nodir: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">&gt;</span> <span class="tp">path</span></span></a> ) } )
  <a class="pp">dirs<span class="pc">dirs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_list-source.html#foreach">foreach<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>list<span class="fslash last">/</span></span>foreach: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp"><span class="kw">fn</span><span class="pc">fn: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">path</span></span></a>){ <a class="pp" href="#copy_directory">copy-directory<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>copy<span class="dash">-</span>directory: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">path</span></span></a>, <a class="pp">to<span class="pc">to: <span class="tp">path</span></span></a> <a class="pp" href="std_os_path-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">p1</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">p2</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">path</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#nodir">nodir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>nodir: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">path</span></span></a> ) } </span>)

<span class="comment">// Ensure a directory path exists
</span><span class="decl-fun" id="ensure_dir"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_os_dir.html#ensure_dir">ensure-dir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>ensure<span class="dash">-</span>dir: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_total"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a><a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core_exn-source.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>exn: <span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  <span class="kw">match</span> <a class="pp" href="#ensure_dir_err">ensure-dir-err<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>ensure<span class="dash">-</span>dir<span class="dash">-</span>err: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">mode</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">&gt;</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>, <a class="pp">-1<span class="pc">literal: <span class="tp">int</span><br>dec  = -1<br>hex8 = 0xFF<br>bit8 = 0b11111111</span></a>)
    <a class="pp" href="std_core_exn-source.html#con_space_Error"><span class="co">Error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>Error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a>) <span class="kw op">-></span> <a class="pp" href="std_core_exn-source.html#throw_exn">throw-exn<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>throw<span class="dash">-</span>exn: <span class="tp sp">(</span><span class="tp tpp">exn</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a><span class="kw op">.</span><a class="pp" href="#prepend">prepend<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prepend: <span class="tp sp">(</span><span class="tp tpp">exn</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">,</span> <span class="tp tpp">pre</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">exception</span></span></a>(<a class="pp">"unable to create directory "<span class="pc">literal: <span class="tp">string</span><br>count= 27</span></a> <a class="pp" href="std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a> <a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>))
    <a class="pp" href="std_core_exn-source.html#con_space_Ok"><span class="co">Ok</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>Ok: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>         <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Unit"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Unit: <span class="tp sp">(</span><span class="tp sp">)</span></span></a></span><a class="pp" href="std_core_types-source.html#con_space_Unit"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Unit: <span class="tp sp">(</span><span class="tp sp">)</span></span></a>


<span class="comment">// List directory contents (excluding &#96;.&#96; and &#96;..&#96;).
// Returns a list of full paths (not just the names in the directory).
</span><span class="decl-fun" id="list_directory"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_os_dir.html#list_directory">list-directory<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>list<span class="dash">-</span>directory: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="kw">match</span> <a class="pp" href="#prim_list_dir">prim-list-dir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prim<span class="dash">-</span>list<span class="dash">-</span>dir: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">string</span></span></a>)
    <a class="pp" href="std_core_exn-source.html#con_space_Error"><span class="co">Error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>Error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>()      <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core_types-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
    <a class="pp" href="std_core_exn-source.html#con_space_Ok"><span class="co">Ok</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>Ok: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">contents<span class="pc">contents: <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>) <span class="kw op">-></span> <a class="pp">contents<span class="pc">contents: <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_vector-source.html#list">list<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>vector<span class="fslash last">/</span></span>list: <span class="tp sp">(</span><span class="tp tpp">v</span> <span class="tp kw op">:</span> <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_list-source.html#map">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>list<span class="fslash last">/</span></span>map: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">path</span><span class="tp sp">&gt;</span></span></a>(<a class="pp"><span class="kw">fn</span><span class="pc">fn: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">path</span></span></a>(<a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a>){ <a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a> <a class="pp" href="std_os_path-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">p1</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">p2</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">path</span></span></a> <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#path">path<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">path</span></span></a> }</span>)


<span class="comment">// Is the path a valid directory?
</span><span class="decl-fun" id="is_directory"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_os_dir.html#is_directory">is-directory<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>is<span class="dash">-</span>directory: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">bool</span></span></a>( <a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  <a class="pp" href="#prim_is_dir">prim-is-dir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prim<span class="dash">-</span>is<span class="dash">-</span>dir: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">bool</span></span></a>(<a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">string</span></span></a></span>)

<span class="comment">// Is the path a valid file?
</span><span class="decl-fun" id="is_file"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_os_dir.html#is_file">is-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>is<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">bool</span></span></a>( <a class="pp">path<span class="pc">path: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  <a class="pp" href="#prim_is_file">prim-is-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prim<span class="dash">-</span>is<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">bool</span></span></a>(<a class="pp">path<span class="pc">path: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">string</span></span></a></span>)

<span class="comment">// Copy a file to a directory
</span><span class="decl-fun" id="copy_file_to_dir"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_os_dir.html#copy_file_to_dir">copy-file-to-dir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>copy<span class="dash">-</span>file<span class="dash">-</span>to<span class="dash">-</span>dir: <span class="tp sp">(</span><span class="tp tpp">from</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">from<span class="pc">from: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a>, <a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_total"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a><a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core_exn-source.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>exn: <span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  <a class="pp" href="#copy_file">copy-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>copy<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">from</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">preserve<span class="dash">-</span>mtime</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">from<span class="pc">from: <span class="tp">path</span></span></a>, <a class="pp">dir<span class="pc">dir: <span class="tp">path</span></span></a> <a class="pp" href="std_os_path-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">p1</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">p2</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">path</span></span></a> <a class="pp">from<span class="pc">from: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#nodir">nodir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>nodir: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">path</span></span></a></span>)

<span class="comment">// Copy a file.
</span><span class="decl-fun" id="copy_file"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="std_os_dir.html#copy_file">copy-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>copy<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">from</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">preserve<span class="dash">-</span>mtime</span> <span class="tp kw op">:</span> <span class="tp sp">?</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">from<span class="pc">from: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a>, <a class="pp">to<span class="pc">to: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="co">V</span></span></a>, <a class="pp">preserve-mtime<span class="pc">preserve<span class="dash">-</span>mtime: <span class="tp sp">?</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core_types-source.html#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_total"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a><a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core_exn-source.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>exn: <span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  <span class="kw">match</span> <a class="pp" href="#prim_copy_file">prim-copy-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prim<span class="dash">-</span>copy<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">from</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">preserve<span class="dash">-</span>mtime</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">&gt;</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">from<span class="pc">from: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>, <a class="pp">to<span class="pc">to: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">fsys</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>, <a class="pp">preserve-mtime<span class="pc">preserve<span class="dash">-</span>mtime: <span class="tp">bool</span></span></a> )
    <a class="pp" href="std_core_exn-source.html#con_space_Error"><span class="co">Error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>Error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a>) <span class="kw op">-></span> <a class="pp" href="std_core_exn-source.html#throw_exn">throw-exn<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>throw<span class="dash">-</span>exn: <span class="tp sp">(</span><span class="tp tpp">exn</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a><span class="kw op">.</span><a class="pp" href="#prepend">prepend<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prepend: <span class="tp sp">(</span><span class="tp tpp">exn</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">,</span> <span class="tp tpp">pre</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">exception</span></span></a>(<a class="pp">"unable to copy "<span class="pc">literal: <span class="tp">string</span><br>count= 15</span></a> <a class="pp" href="std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a> <a class="pp">from<span class="pc">from: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a> <a class="pp" href="std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a> <a class="pp">" to "<span class="pc">literal: <span class="tp">string</span><br>count= 4</span></a> <a class="pp" href="std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a> <a class="pp">to<span class="pc">to: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>))
    &#95; <span class="kw op">-></span> <a class="pp" href="std_core_types-source.html#con_space_Unit"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Unit: <span class="tp sp">(</span><span class="tp sp">)</span></span></a></span><a class="pp" href="std_core_types-source.html#con_space_Unit"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Unit: <span class="tp sp">(</span><span class="tp sp">)</span></span></a>


<span class="decl-fun" id="prepend"><span class="kw">fun</span> <a class="pp" href="std_os_dir.html#prepend">prepend<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prepend: <span class="tp sp">(</span><span class="tp tpp">exn</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">,</span> <span class="tp tpp">pre</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exception</span></span></a>( <a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_exn-source.html#type_space_exception"><span class="tp">exception</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>exception: <span class="co">V</span></span></a>, <a class="pp">pre<span class="pc">pre: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">exception</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_exn-source.html#type_space_exception"><span class="tp">exception</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>exception: <span class="co">V</span></span></a>
  <a class="pp" href="std_core_exn-source.html#con_space_Exception"><span class="co">Exception</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>Exception: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">info</span> <span class="tp kw op">:</span> <span class="tp">exception<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exception</span></span></a>(<a class="pp">pre<span class="pc">pre: <span class="tp">string</span></span></a> <a class="pp" href="std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">": "<span class="pc">literal: <span class="tp">string</span><br>count= 2</span></a> <a class="pp" href="std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_exn-source.html#exception_fs_message">message<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span><span class="lq">exception<span class="fslash">/</span></span>message: <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>, <a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a><span class="kw op">.</span><a class="pp" href="std_core_exn-source.html#exception_fs_info">info<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span><span class="lq">exception<span class="fslash">/</span></span>info: <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exception<span class="dash">-</span>info</span></span></a></span>)

<span class="decl-fun" id="ensure_dir_err"><span class="kw">extern</span> <a class="pp" href="std_os_dir.html#ensure_dir_err">ensure-dir-err<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>ensure<span class="dash">-</span>dir<span class="dash">-</span>err: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">mode</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">path<span class="pc">path: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">mode<span class="pc">mode: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a> <a class="pp" href="std_core_exn-source.html#type_space_error"><span class="tp">error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>error: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c <span class="st">"kk&#95;os&#95;ensure&#95;dir&#95;error"</span></span>

<span class="decl-fun" id="prim_copy_file"><span class="kw">extern</span> <a class="pp" href="std_os_dir.html#prim_copy_file">prim-copy-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prim<span class="dash">-</span>copy<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">from</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">to</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">preserve<span class="dash">-</span>mtime</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">from<span class="pc">from: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">to<span class="pc">to: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">preserve-mtime<span class="pc">preserve<span class="dash">-</span>mtime: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a> <a class="pp" href="std_core_exn-source.html#type_space_error"><span class="tp">error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>error: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c <span class="st">"kk&#95;os&#95;copy&#95;file&#95;error"</span></span>

<span class="decl-fun" id="prim_list_dir"><span class="kw">extern</span> <a class="pp" href="std_os_dir.html#prim_list_dir">prim-list-dir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prim<span class="dash">-</span>list<span class="dash">-</span>dir: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">dir<span class="pc">dir: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a> <a class="pp" href="std_core_exn-source.html#type_space_error"><span class="tp">error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>exn<span class="fslash last">/</span></span>error: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_vector"><span class="tp">vector</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>vector: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span>
  c <span class="st">"kk&#95;os&#95;list&#95;directory&#95;prim"</span></span>

<span class="decl-fun" id="prim_is_dir"><span class="kw">extern</span> <a class="pp" href="std_os_dir.html#prim_is_dir">prim-is-dir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prim<span class="dash">-</span>is<span class="dash">-</span>dir: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">bool</span></span></a>( <a class="pp">dir<span class="pc">dir: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  c <span class="st">"kk&#95;os&#95;is&#95;directory"</span></span>

<span class="decl-fun" id="prim_is_file"><span class="kw">extern</span> <a class="pp" href="std_os_dir.html#prim_is_file">prim-is-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>prim<span class="dash">-</span>is<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">bool</span></span></a>( <a class="pp">path<span class="pc">path: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="co">X</span></span></a> <a class="pp" href="std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  c <span class="st">"kk&#95;os&#95;is&#95;file"</span></span>

</pre>

</body>
</html>
