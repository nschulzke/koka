<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=1.0" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>debug.kk documentation</title>
</head>

<body class="koka doc body madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2023-2024, Microsoft Research, Daan Leijen.

  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the LICENSE file at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">// Core debugging functions.
</span><span class="kw">module</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#_null_"><span class="mo">std/core/debug</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug</span></span></a>

<span class="kw">import</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#_null_"><span class="mo">std/core/types</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types</span></span></a>
<span class="kw">import</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_unsafe.html#_null_"><span class="mo">std/core/unsafe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>unsafe</span></span></a>
<span class="kw">import</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_hnd.html#_null_"><span class="mo">std/core/hnd</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd</span></span></a>
<span class="kw">import</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_string.html#_null_"><span class="mo">std/core/string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>string</span></span></a>
<span class="kw">import</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_console.html#_null_"><span class="mo">std/core/console</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>console</span></span></a>

<span class="kw">extern</span> <span class="kw">import</span>
  c file <span class="st">"inline/debug.c"</span>

<span class="comment">// ------------------------------------------------------------------------------
// File locations
// ------------------------------------------------------------------------------
</span>
<span class="comment">// Compilation constant that is replaced with the current file's module name
</span><span class="decl-val" id="file_fs_kk_module"><span class="kw">pub</span> <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#file_fs_kk_module">file/kk-module<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span><span class="lq">file<span class="fslash">/</span></span>kk<span class="dash">-</span>module: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">""<span class="pc">literal: <span class="tp">string</span><br>count= 0</span></a></span>

<span class="comment">// Compilation constant that is replaced with the current line number
</span><span class="decl-val" id="file_fs_kk_line"><span class="kw">pub</span> <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#file_fs_kk_line">file/kk-line<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span><span class="lq">file<span class="fslash">/</span></span>kk<span class="dash">-</span>line: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">""<span class="pc">literal: <span class="tp">string</span><br>count= 0</span></a></span>

<span class="comment">// Compilation constant that is replaced with the current file name
</span><span class="decl-val" id="file_fs_kk_file"><span class="kw">pub</span> <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#file_fs_kk_file">file/kk-file<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span><span class="lq">file<span class="fslash">/</span></span>kk<span class="dash">-</span>file: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp">""<span class="pc">literal: <span class="tp">string</span><br>count= 0</span></a></span>

<span class="decl-fun" id="file_fs_kk_file_line"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#file_fs_kk_file_line">file/kk-file-line<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span><span class="lq">file<span class="fslash">/</span></span>kk<span class="dash">-</span>file<span class="dash">-</span>line: <span class="tp sp">(</span><span class="tp tpp">@implicit<span class="fslash">/</span>kk<span class="dash">-</span>file</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">@implicit<span class="fslash">/</span>kk<span class="dash">-</span>line</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">@implicit/kk-file<span class="pc"><span class="lq">?</span>kk<span class="dash">-</span>file: <span class="tp">string</span></span></a>, <a class="pp">@implicit/kk-line<span class="pc"><span class="lq">?</span>kk<span class="dash">-</span>line: <span class="tp">string</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a>
  <a class="pp">@implicit/kk-file<span class="pc"><span class="lq">?</span>kk<span class="dash">-</span>file: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">"("<span class="pc">literal: <span class="tp">string</span><br>count= 1</span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">@implicit/kk-line<span class="pc"><span class="lq">?</span>kk<span class="dash">-</span>line: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">")"<span class="pc">literal: <span class="tp">string</span><br>count= 1</span></a></span>

<span class="comment">// ----------------------------------------------------------------------------
// Trace, assert, todo
// ----------------------------------------------------------------------------
</span>
<span class="decl-fun" id="xtrace"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#xtrace">xtrace<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>xtrace: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span> <span class="tp tpp">message</span> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  c  <span class="st">"kk&#95;trace"</span>
  cs <span class="st">"Primitive.Trace"</span>
  js <span class="st">"$std&#95;core&#95;console.&#95;trace"</span></span>

<span class="decl-fun" id="xtrace_any"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#xtrace_any">xtrace-any<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>xtrace<span class="dash">-</span>any: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span> <span class="tp tpp">message</span><span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a><span class="tp sp">,</span> <span class="tp tpp">x</span> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  c  <span class="st">"kk&#95;trace&#95;any"</span>
  cs <span class="st">"Primitive.TraceAny"</span>
  js <span class="st">"$std&#95;core&#95;console.&#95;trace&#95;any"</span></span>

<span class="decl-val" id="trace_enabled"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#trace_enabled">trace-enabled<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>trace<span class="dash">-</span>enabled: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">,</span><span class="tp">bool</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_ref"><span class="tp">ref</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_global"><span class="tp">global</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>global: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_unsafe-source.html#unsafe_total">unsafe-total<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>unsafe<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>total: <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">alloc</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">&#95;122</span><span class="tp sp">&gt;</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">,</span><span class="tp">bool</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">,</span><span class="tp">bool</span><span class="tp sp">&gt;</span></span></a>{ <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#ref">ref<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">alloc</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">&#95;122</span><span class="tp sp">&gt;</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">,</span><span class="tp">bool</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a>) </span>}

<span class="comment">// Trace a message used for debug purposes.
// The behaviour is system dependent. On a browser and node it uses
// &#96;console.log&#96;  by default.
// Disabled if &#96;notrace&#96; is called.
</span><span class="decl-fun" id="trace"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#trace">trace<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>trace: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">message<span class="pc">message: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_unsafe-source.html#unsafe_total">unsafe-total<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>unsafe<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>total: <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">&#95;150</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>
    <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#ref_fs__excl_">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">ref<span class="fslash">/</span></span>(!): <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">,</span><span class="tp">bool</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">&#95;150</span><span class="tp sp">&gt;</span> <span class="tp">bool</span></span></a><a class="pp" href="#trace_enabled">trace-enabled<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>trace<span class="dash">-</span>enabled: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">,</span><span class="tp">bool</span><span class="tp sp">&gt;</span></span></a> <span class="kw">then</span> <a class="pp" href="#xtrace">xtrace<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>xtrace: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">&#95;150</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">message<span class="pc">message: <span class="tp">string</span></span></a></span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Unit"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Unit: <span class="tp sp">(</span><span class="tp sp">)</span></span></a>

<span class="decl-fun" id="trace_info"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#trace_info">trace-info<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>trace<span class="dash">-</span>info: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">@implicit<span class="fslash">/</span>kk<span class="dash">-</span>file<span class="dash">-</span>line</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">message<span class="pc">message: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">@implicit/kk-file-line<span class="pc"><span class="lq">?</span>kk<span class="dash">-</span>file<span class="dash">-</span>line: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  <a class="pp" href="#trace">trace<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>trace: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">@implicit/kk-file-line<span class="pc"><span class="lq">?</span>kk<span class="dash">-</span>file<span class="dash">-</span>line: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">": "<span class="pc">literal: <span class="tp">string</span><br>count= 2</span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">message<span class="pc">message: <span class="tp">string</span></span></a></span>)

<span class="decl-fun" id="trace_show"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#trace_show">trace-show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>trace<span class="dash">-</span>show: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">@implicit<span class="fslash">/</span>show</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">@implicit<span class="fslash">/</span>kk<span class="dash">-</span>file<span class="dash">-</span>line</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">185</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>, <a class="pp">@implicit/show<span class="pc"><span class="lq">?</span>show: <span class="tp sp">(</span><span class="tp op">$</span><span class="number">185</span>) <span class="kw op">-></span> string</span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">@implicit/kk-file-line<span class="pc"><span class="lq">?</span>kk<span class="dash">-</span>file<span class="dash">-</span>line: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  <a class="pp" href="#trace_info">trace-info<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>trace<span class="dash">-</span>info: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">@implicit<span class="fslash">/</span>kk<span class="dash">-</span>file<span class="dash">-</span>line</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span><br>?kk-file-line=?kk-file-line</span></a>(<a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">185</span></span></a><span class="kw op">.</span><a class="pp">show<span class="pc"><span class="lq">?</span>show: <span class="tp sp">(</span><span class="tp op">$</span><span class="number">185</span>) <span class="kw op">-></span> string</span></a></span>)

<span class="decl-fun" id="trace_any"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#trace_any">trace-any<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>trace<span class="dash">-</span>any: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">message<span class="pc">message: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">211</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_unsafe-source.html#unsafe_total">unsafe-total<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>unsafe<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>total: <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">&#95;237</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>
    <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#ref_fs__excl_">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">ref<span class="fslash">/</span></span>(!): <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">,</span><span class="tp">bool</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">&#95;237</span><span class="tp sp">&gt;</span> <span class="tp">bool</span></span></a><a class="pp" href="#trace_enabled">trace-enabled<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>trace<span class="dash">-</span>enabled: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">,</span><span class="tp">bool</span><span class="tp sp">&gt;</span></span></a> <span class="kw">then</span> <a class="pp" href="#xtrace_any">xtrace-any<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>xtrace<span class="dash">-</span>any: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp op">$</span><span class="number">211</span>) <span class="kw op">-></span> <span class="op">&lt;</span>read<span class="op">&lt;</span>global<span class="op">&gt;</span><span class="kw op">|</span>&#95;237<span class="op">&gt;</span> ()</span></a>(<a class="pp">message<span class="pc">message: <span class="tp">string</span></span></a>,<a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">211</span></span></a></span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Unit"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Unit: <span class="tp sp">(</span><span class="tp sp">)</span></span></a>

<span class="comment">// Disable tracing completely.
</span><span class="decl-fun" id="notrace"><span class="kw">pub</span> noinline <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#notrace">notrace<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>notrace: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">st</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">st</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_st"><span class="tp">st</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>st: <span class="co">H</span> <span class="kw op">-></span> <span class="co">E</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_global"><span class="tp">global</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>global: <span class="co">H</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  <a class="pp" href="#trace_enabled">trace-enabled<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>trace<span class="dash">-</span>enabled: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">,</span><span class="tp">bool</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#set"><span class="kw">:=</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>set: <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">,</span><span class="tp">bool</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">write</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><span class="tp">alloc</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp">global</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a></span>

noinline <span class="decl-fun" id="unsafe_assert_fail"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#unsafe_assert_fail">unsafe-assert-fail<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>assert<span class="dash">-</span>fail: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  c <span class="st">"kk&#95;assert&#95;fail"</span>
  js inline <span class="st">"function() { throw new Error(\"assertion failed: \" + #1) }()"</span></span>

<span class="decl-fun" id="assert"><span class="kw">pub</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#assert">assert<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>assert: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">condition</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">@implicit<span class="fslash">/</span>kk<span class="dash">-</span>file<span class="dash">-</span>line</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">message<span class="pc">message: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">condition<span class="pc">condition: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>, <a class="pp">@implicit/kk-file-line<span class="pc"><span class="lq">?</span>kk<span class="dash">-</span>file<span class="dash">-</span>line: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>   <span class="comment">// Compiler removes assert calls in optimized builds
</span>  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#bool_fs__excl_">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">bool<span class="fslash">/</span></span>(!): <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">condition<span class="pc">condition: <span class="tp">bool</span></span></a> <span class="kw">then</span> <a class="pp" href="#unsafe_assert_fail">unsafe-assert-fail<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>assert<span class="dash">-</span>fail: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">kk-file-line<span class="pc"><span class="lq">?</span>kk<span class="dash">-</span>file<span class="dash">-</span>line: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">": "<span class="pc">literal: <span class="tp">string</span><br>count= 2</span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_plus__plus_">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">message<span class="pc">message: <span class="tp">string</span></span></a></span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Unit"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Unit: <span class="tp sp">(</span><span class="tp sp">)</span></span></a>

<span class="comment">// Explicitly trigger a breakpoint
</span><span class="decl-fun" id="breakpoint"><span class="kw">pub</span> <span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_debug.html#breakpoint">breakpoint<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>debug<span class="fslash last">/</span></span>breakpoint: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ndet: <span class="co">X</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a> {
  c <span class="st">"kk&#95;debugger&#95;break"</span>
  cs <span class="st">"System.Diagnostics.Debugger.Break"</span>
  js inline <span class="st">"(function(){ debugger; })()"</span>
</span><a class="pp">}<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a></pre>

</body>
</html>
